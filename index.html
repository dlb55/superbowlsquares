<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>DrewLa's 2026 Superbowl Squares</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Bebas+Neue&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <style>
        :root {
            --gold: #D4AF37;
            --gold-light: #F4D03F;
            --dark: #0a0a0a;
            --dark-secondary: #1a1a1a;
            --dark-tertiary: #2a2a2a;
            --green-field: #2d5a27;
            --white: #ffffff;
            --red: #c41e3a;
            --success: #22c55e;
            --team-x-bg: #ffffff;
            --team-x-text: #0a0a0a;
            --team-y-bg: #D4AF37;
            --team-y-text: #0a0a0a;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background: var(--dark);
            color: var(--white);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
        }

        /* Stadium lights effect */
        body::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(ellipse at 30% 20%, rgba(212, 175, 55, 0.08) 0%, transparent 50%),
                        radial-gradient(ellipse at 70% 20%, rgba(212, 175, 55, 0.08) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        .app-container {
            position: relative;
            z-index: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
        }

        .header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }

        .logo {
            font-family: 'Bebas Neue', sans-serif;
            font-size: clamp(2.5rem, 8vw, 4.5rem);
            letter-spacing: 4px;
            background: linear-gradient(180deg, var(--gold-light) 0%, var(--gold) 50%, #8B7355 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 30px rgba(212, 175, 55, 0.3);
            margin-bottom: 10px;
        }

        .price-badge {
            display: inline-block;
            padding: 10px 30px;
            background: linear-gradient(135deg, var(--gold) 0%, #8B7355 100%);
            color: var(--dark);
            font-family: 'Oswald', sans-serif;
            font-weight: 600;
            font-size: 1.2rem;
            border-radius: 4px;
            letter-spacing: 1px;
        }

        .header-badges {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .prop-badge {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
        }

        .prop-standings-header {
            margin-top: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            font-family: 'Oswald', sans-serif;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            background: rgba(139, 92, 246, 0.15);
            padding: 8px 15px;
            border-radius: 6px;
            border: 1px solid rgba(139, 92, 246, 0.3);
        }

        .prop-standings-label {
            color: #a78bfa;
            font-weight: 500;
        }

        .prop-standings-list {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            align-items: center;
        }

        .prop-standing-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .prop-standing-place {
            font-weight: 600;
            color: var(--gold);
        }

        .prop-standing-name {
            color: rgba(255, 255, 255, 0.9);
        }

        .prop-standing-score {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8rem;
        }

        .payouts-info {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.8);
            letter-spacing: 0.5px;
        }

        .payouts-label {
            color: rgba(255, 255, 255, 0.5);
            margin-right: 4px;
        }

        .payout-item strong {
            color: var(--gold);
        }

        .payout-divider {
            color: var(--gold);
            opacity: 0.5;
        }

        /* Winners Display */
        .winners-display {
            margin-top: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            flex-wrap: wrap;
            font-family: 'Oswald', sans-serif;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .winners-label {
            color: rgba(255, 255, 255, 0.5);
            margin-right: 4px;
        }

        .winner-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .winner-item strong {
            color: var(--gold);
        }

        .winner-name {
            color: var(--success);
            font-weight: 500;
        }

        .winner-name.pending {
            color: rgba(255, 255, 255, 0.3);
            font-style: italic;
        }

        /* Current Score Display */
        .current-score-display {
            margin-top: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            font-family: 'Bebas Neue', sans-serif;
        }

        .score-team {
            text-align: center;
        }

        .score-team-name {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4px;
        }

        .score-value {
            font-size: 2.5rem;
            color: var(--gold);
        }

        .score-separator {
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.3);
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: center;
            gap: 40px;
            padding: 20px;
            margin: 30px 0;
            background: var(--dark-secondary);
            border-radius: 8px;
            border: 1px solid var(--dark-tertiary);
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
        }

        .stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Navigation */
        .nav-tabs {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-tab {
            padding: 12px 30px;
            background: var(--dark-secondary);
            border: 2px solid var(--dark-tertiary);
            color: var(--white);
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 4px;
        }

        .nav-tab:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .nav-tab.active {
            background: var(--gold);
            color: var(--dark);
            border-color: var(--gold);
        }

        /* Grid Container */
        .grid-container {
            background: var(--dark-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--dark-tertiary);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            position: relative;
        }

        .scroll-hint {
            display: none;
            text-align: center;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.75rem;
            padding: 8px;
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .scroll-hint {
                display: block;
            }
        }

        .teams-header {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            padding: 0 10px;
        }

        .team-name {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.8rem;
            letter-spacing: 2px;
            padding: 8px 20px;
            border-radius: 6px;
        }

        .team-name.team-x {
            background: var(--team-x-bg);
            color: var(--team-x-text);
        }

        .team-name.team-y {
            background: var(--team-y-bg);
            color: var(--team-y-text);
            writing-mode: vertical-rl;
            text-orientation: mixed;
            transform: rotate(180deg);
            padding: 20px 8px;
        }

        /* The Grid */
        .squares-wrapper {
            display: flex;
            justify-content: center;
            align-items: stretch;
            gap: 10px;
            min-width: fit-content;
        }

        .team-y-wrapper {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        /* Quarter Key */
        /* Status Legend */
        .status-legend {
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 6px;
            margin-bottom: 8px;
            padding: 4px 8px;
            background: var(--dark);
            border-radius: 4px;
            border: 1px solid var(--dark-tertiary);
            width: fit-content;
            margin-left: auto;
        }

        .status-legend-title {
            font-family: 'Oswald', sans-serif;
            font-size: 0.55rem;
            color: rgba(255, 255, 255, 0.5);
            letter-spacing: 0.5px;
        }

        .status-legend-items {
            display: flex;
            gap: 6px;
        }

        .status-legend-item {
            display: flex;
            align-items: center;
            gap: 2px;
            font-size: 0.5rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .status-legend-box {
            width: 10px;
            height: 10px;
            border-radius: 2px;
        }

        .status-legend-box.in-money-box {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            border: 1px solid #4ade80;
            animation: pulse-money 2s ease-in-out infinite;
        }

        .status-legend-box.winner-q1-box {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: 1px solid #60a5fa;
        }

        .status-legend-box.winner-q2-box {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);
            border: 1px solid #a78bfa;
        }

        .status-legend-box.winner-q3-box {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            border: 1px solid #fbbf24;
        }

        .status-legend-box.winner-q4-box {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border: 1px solid #f87171;
        }

        .squares-grid {
            display: grid;
            grid-template-columns: 80px repeat(10, minmax(50px, 70px));
            gap: 2px;
            background: var(--dark-tertiary);
            padding: 2px;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .number-header {
            background: var(--dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 5px;
            font-family: 'Oswald', sans-serif;
            min-height: 60px;
        }

        .number-header.corner {
            background: linear-gradient(135deg, var(--gold) 0%, #8B7355 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .corner-quarter-key {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 2px;
            width: 44px;
            height: 28px;
        }

        .corner-q {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.5rem;
            font-weight: 600;
            border-radius: 2px;
            color: #0a0a0a;
        }

        .corner-q.q1 { background: rgba(255, 255, 255, 0.9); }
        .corner-q.q2 { background: rgba(255, 255, 255, 0.7); }
        .corner-q.q3 { background: rgba(255, 255, 255, 0.5); }
        .corner-q.q4 { background: rgba(255, 255, 255, 0.3); }

        .quarter-numbers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 2px;
            width: 100%;
            height: 100%;
        }

        .quarter-num {
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
            color: var(--gold);
            font-weight: 600;
        }

        .quarter-num.q1 { background: rgba(212, 175, 55, 0.3); }
        .quarter-num.q2 { background: rgba(212, 175, 55, 0.22); }
        .quarter-num.q3 { background: rgba(212, 175, 55, 0.15); }
        .quarter-num.q4 { background: rgba(212, 175, 55, 0.08); }

        .row-header {
            background: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 5px;
            font-family: 'Oswald', sans-serif;
        }

        .square {
            aspect-ratio: 1;
            min-width: 50px;
            min-height: 50px;
            background: var(--green-field);
            border: 1px solid rgba(255, 255, 255, 0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.7rem;
            text-align: center;
            padding: 4px;
            word-break: break-word;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .square::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .square:hover:not(.taken) {
            border-color: var(--gold);
            transform: scale(1.05);
            z-index: 10;
        }

        .square:hover::before {
            opacity: 1;
        }

        .square.taken {
            background: var(--dark-tertiary);
            cursor: default;
            color: rgba(255, 255, 255, 0.8);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .square.selected {
            background: var(--gold);
            color: var(--dark);
            border-color: var(--gold-light);
            font-weight: 600;
        }

        .square.selected::after {
            content: 'âœ“';
            position: absolute;
            top: 2px;
            right: 4px;
            font-size: 0.6rem;
        }

        .square.in-the-money {
            background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
            color: white;
            font-weight: 600;
            animation: pulse-money 2s ease-in-out infinite;
            border: 2px solid #4ade80;
        }

        @keyframes pulse-money {
            0%, 100% { box-shadow: 0 0 5px rgba(34, 197, 94, 0.5); }
            50% { box-shadow: 0 0 20px rgba(34, 197, 94, 0.8); }
        }

        .square.winner-q1,
        .square.winner-q2,
        .square.winner-q3,
        .square.winner-q4 {
            position: relative;
            font-weight: 600;
        }

        .square.winner-q1 { background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; border: 2px solid #60a5fa; }
        .square.winner-q2 { background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); color: white; border: 2px solid #a78bfa; }
        .square.winner-q3 { background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: 2px solid #fbbf24; }
        .square.winner-q4 { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: 2px solid #f87171; }

        .square .winner-badge {
            position: absolute;
            top: 2px;
            right: 2px;
            font-size: 0.5rem;
            background: rgba(0,0,0,0.4);
            padding: 1px 3px;
            border-radius: 2px;
            font-weight: 700;
        }

        /* Selection Panel */
        .selection-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--dark-secondary);
            border-top: 3px solid var(--gold);
            padding: 20px;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            z-index: 100;
        }

        .selection-panel.active {
            transform: translateY(0);
        }

        .selection-content {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
            flex-wrap: wrap;
        }

        .selection-info {
            flex: 1;
        }

        .selection-count {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
        }

        .selection-total {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        .selection-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 12px 30px;
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            letter-spacing: 1px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--gold) 0%, #8B7355 100%);
            color: var(--dark);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(212, 175, 55, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--dark-tertiary);
            color: var(--white);
        }

        .btn-secondary:hover {
            border-color: var(--white);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            padding: 20px;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--dark-secondary);
            border-radius: 12px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            border: 2px solid var(--gold);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 20px;
            text-align: center;
        }

        .modal-input {
            width: 100%;
            padding: 15px;
            background: var(--dark);
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
            color: var(--white);
            font-size: 1rem;
            margin-bottom: 20px;
            transition: border-color 0.2s ease;
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        .modal-summary {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--dark-tertiary);
        }

        .summary-row:last-child {
            border-bottom: none;
            font-weight: 600;
            color: var(--gold);
            font-size: 1.2rem;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
        }

        .modal-actions .btn {
            flex: 1;
        }

        /* Success Modal */
        .success-icon {
            width: 80px;
            height: 80px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
        }

        .payment-info {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .payment-method {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid var(--dark-tertiary);
        }

        .payment-method:last-child {
            border-bottom: none;
        }

        .payment-icon {
            width: 50px;
            height: 50px;
            background: var(--dark-tertiary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--gold);
        }

        .payment-details {
            flex: 1;
        }

        .payment-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 4px;
        }

        .payment-value {
            font-weight: 500;
            color: var(--white);
        }

        /* Admin Panel */
        .admin-panel {
            display: none;
        }

        .admin-panel.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .admin-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            color: var(--gold);
        }

        .admin-actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .admin-table-container {
            background: var(--dark-secondary);
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid var(--dark-tertiary);
        }

        .admin-table {
            width: 100%;
            border-collapse: collapse;
        }

        .admin-table th,
        .admin-table td {
            padding: 15px 20px;
            text-align: left;
            border-bottom: 1px solid var(--dark-tertiary);
        }

        .admin-table th {
            background: var(--dark);
            font-family: 'Oswald', sans-serif;
            font-weight: 500;
            letter-spacing: 1px;
            color: var(--gold);
        }

        .admin-table tr:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .status-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .status-paid {
            background: rgba(34, 197, 94, 0.2);
            color: var(--success);
        }

        .status-pending {
            background: rgba(212, 175, 55, 0.2);
            color: var(--gold);
        }

        .toggle-btn {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid var(--dark-tertiary);
            color: var(--white);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }

        .toggle-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .toggle-btn.remove-btn {
            border-color: #dc2626;
            color: #dc2626;
        }

        .toggle-btn.remove-btn:hover {
            background: #dc2626;
            color: white;
        }

        .edit-btn {
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
            padding: 2px 5px;
            margin-left: 5px;
            opacity: 0.6;
            transition: opacity 0.2s;
        }

        .edit-btn:hover {
            opacity: 1;
        }

        .participant-name {
            font-weight: 500;
        }

        .square-count {
            margin-right: 5px;
        }

        /* Quarter Numbers Section */
        .numbers-section {
            margin-top: 30px;
        }

        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .quarter-card {
            background: var(--dark-secondary);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--dark-tertiary);
        }

        .quarter-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.3rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-align: center;
        }

        .numbers-display {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
        }

        .num-cell {
            aspect-ratio: 1;
            background: var(--dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.9rem;
            border-radius: 4px;
        }

        /* Password Modal */
        .password-input {
            width: 100%;
            padding: 15px;
            background: var(--dark);
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
            color: var(--white);
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        /* Legend */
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        .legend-color.available {
            background: var(--green-field);
        }

        .legend-color.selected {
            background: var(--gold);
        }

        .legend-color.taken {
            background: var(--dark-tertiary);
        }

        /* Admin Footer */
        .admin-footer {
            margin-top: 40px;
            text-align: center;
            padding: 20px;
        }

        .admin-login-btn {
            background: transparent;
            border: 1px solid var(--dark-tertiary);
            color: rgba(255, 255, 255, 0.4);
            padding: 8px 20px;
            font-family: 'Oswald', sans-serif;
            font-size: 0.85rem;
            letter-spacing: 1px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .admin-login-btn:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        /* Responsive */
        /* Responsive - Tablet */
        @media (max-width: 900px) {
            .app-container {
                padding: 10px;
            }

            .header {
                padding: 25px 15px;
            }

            .logo {
                font-size: 2.5rem;
                letter-spacing: 2px;
            }

            .price-badge {
                font-size: 1rem;
                padding: 8px 20px;
            }

            .payouts-info {
                font-size: 0.9rem;
                gap: 6px;
            }

            .stats-bar {
                gap: 25px;
                padding: 15px;
            }

            .stat-value {
                font-size: 2rem;
            }

            .grid-container {
                padding: 15px;
            }

            .team-name {
                font-size: 1.4rem;
                padding: 6px 15px;
            }

            .team-name.team-y {
                padding: 15px 6px;
            }
        }

        /* Responsive - Mobile */
        @media (max-width: 768px) {
            .app-container {
                padding: 8px;
            }

            .header {
                padding: 20px 10px;
            }

            .header::after {
                width: 120px;
            }

            .logo {
                font-size: 2rem;
                letter-spacing: 1px;
            }

            .price-badge {
                font-size: 0.9rem;
                padding: 8px 16px;
                margin-top: 8px;
            }

            .payouts-info {
                font-size: 0.8rem;
                gap: 4px;
                margin-top: 10px;
            }

            .payouts-label {
                display: block;
                width: 100%;
                margin-bottom: 4px;
            }

            .winners-display {
                font-size: 0.75rem;
                margin-top: 8px;
            }

            .winners-label {
                display: block;
                width: 100%;
                margin-bottom: 4px;
            }

            .current-score-display {
                margin-top: 12px;
                gap: 15px;
            }

            .score-value {
                font-size: 2rem;
            }

            .score-team-name {
                font-size: 0.8rem;
            }

            .score-inputs {
                flex-direction: column;
                align-items: stretch;
            }

            .score-input-group {
                width: 100%;
            }

            .score-input {
                width: 100%;
            }

            .quarter-scores-grid {
                grid-template-columns: 1fr 1fr;
            }

            .stats-bar {
                gap: 20px;
                padding: 12px;
                margin: 15px 0;
            }

            .stat-value {
                font-size: 1.8rem;
            }

            .stat-label {
                font-size: 0.75rem;
            }

            .grid-container {
                padding: 10px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .status-legend {
                padding: 3px 6px;
                gap: 4px;
                margin-bottom: 6px;
            }

            .status-legend-title {
                font-size: 0.5rem;
            }

            .status-legend-items {
                gap: 5px;
            }

            .status-legend-item {
                font-size: 0.45rem;
                gap: 2px;
            }

            .status-legend-box {
                width: 8px;
                height: 8px;
            }

            .teams-header {
                margin-bottom: 10px;
            }

            .team-name {
                font-size: 1.2rem;
                padding: 5px 12px;
            }

            .team-name.team-y {
                padding: 12px 5px;
                font-size: 1rem;
            }

            .squares-wrapper {
                gap: 6px;
                justify-content: flex-start;
            }

            .squares-grid {
                grid-template-columns: 50px repeat(10, 32px);
                gap: 0px;
                padding: 0px;
            }

            .square {
                min-width: 32px;
                min-height: 32px;
                max-height: 32px;
                font-size: 0.5rem;
                border-width: 0.5px;
                aspect-ratio: unset;
                padding: 2px;
            }

            .number-header {
                min-height: 40px;
                max-height: 40px;
                padding: 2px;
            }

            .row-header {
                min-width: 50px;
                min-height: 32px;
                max-height: 32px;
                padding: 2px;
            }

            .corner-quarter-key {
                width: 32px;
                height: 20px;
            }

            .corner-q {
                font-size: 0.35rem;
            }

            .quarter-num {
                font-size: 0.5rem;
            }

            .legend {
                gap: 15px;
                margin-top: 15px;
            }

            .legend-item {
                font-size: 0.75rem;
                gap: 5px;
            }

            .legend-color {
                width: 16px;
                height: 16px;
            }

            .admin-footer {
                margin-top: 25px;
                padding: 15px;
            }

            .selection-panel {
                padding: 15px;
            }

            .selection-content {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .selection-count {
                font-size: 1.2rem;
            }

            .selection-actions {
                width: 100%;
                justify-content: center;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }

            /* Modal adjustments */
            .modal {
                padding: 25px 20px;
                margin: 10px;
                max-height: 90vh;
                overflow-y: auto;
            }

            .modal-title {
                font-size: 1.6rem;
            }

            .modal-input {
                padding: 12px;
                font-size: 1rem;
            }

            .payment-method {
                padding: 12px 0;
                gap: 12px;
            }

            .payment-icon {
                width: 40px;
                height: 40px;
                font-size: 0.9rem;
            }

            /* Admin panel mobile */
            .admin-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }

            .admin-title {
                font-size: 1.6rem;
            }

            .admin-actions {
                flex-wrap: wrap;
                justify-content: center;
            }

            .admin-section-card {
                padding: 15px;
            }

            .admin-section-title {
                font-size: 1.2rem;
            }

            .team-settings {
                grid-template-columns: 1fr;
            }

            .team-config {
                padding: 15px;
            }

            .config-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .config-label {
                min-width: auto;
            }

            .config-input {
                width: 100%;
            }

            .quarter-editor {
                grid-template-columns: 1fr;
            }

            .quarter-edit-card {
                padding: 15px;
            }

            .numbers-edit-grid {
                gap: 3px;
            }

            .number-input {
                font-size: 0.75rem;
            }

            .admin-table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .admin-table {
                min-width: 500px;
            }

            .admin-table th,
            .admin-table td {
                padding: 10px 8px;
                font-size: 0.8rem;
            }

            .status-badge {
                padding: 4px 10px;
                font-size: 0.75rem;
            }

            .toggle-btn {
                padding: 6px 12px;
                font-size: 0.75rem;
            }
        }

        /* Responsive - Small Mobile */
        @media (max-width: 400px) {
            .logo {
                font-size: 1.6rem;
            }

            .price-badge {
                font-size: 0.8rem;
                padding: 6px 14px;
            }

            .payouts-info {
                font-size: 0.7rem;
            }

            .payout-divider {
                display: none;
            }

            .payout-item {
                display: block;
            }

            .stats-bar {
                gap: 15px;
            }

            .stat-value {
                font-size: 1.5rem;
            }

            .squares-grid {
                grid-template-columns: 45px repeat(10, 28px);
                gap: 0px;
                padding: 0px;
            }

            .square {
                min-width: 28px;
                min-height: 28px;
                max-height: 28px;
                font-size: 0.45rem;
                border-width: 0.5px;
                aspect-ratio: unset;
                padding: 1px;
            }

            .number-header {
                min-height: 35px;
                max-height: 35px;
                padding: 2px;
            }

            .row-header {
                min-width: 45px;
                min-height: 28px;
                max-height: 28px;
                padding: 2px;
            }

            .corner-quarter-key {
                width: 28px;
                height: 16px;
            }

            .corner-q {
                font-size: 0.3rem;
            }

            .quarter-num {
                font-size: 0.45rem;
            }

            .team-name {
                font-size: 1rem;
            }

            .team-name.team-y {
                font-size: 0.85rem;
            }
        }

        /* Navigation Tabs */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .nav-tab {
            padding: 12px 30px;
            background: var(--dark-secondary);
            border: 2px solid var(--dark-tertiary);
            color: rgba(255, 255, 255, 0.7);
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            letter-spacing: 1px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .nav-tab:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--gold) 0%, #8B7355 100%);
            color: var(--dark);
            border-color: var(--gold);
            font-weight: 600;
        }

        /* Prop Bets Styles */
        .prop-bets-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .prop-bets-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
            text-align: center;
            margin-bottom: 10px;
        }

        .prop-bets-subtitle {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .prop-name-entry {
            text-align: center;
            padding: 40px;
            background: var(--dark-secondary);
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .prop-label {
            display: block;
            font-family: 'Oswald', sans-serif;
            font-size: 1.2rem;
            color: var(--gold);
            margin-bottom: 15px;
        }

        .prop-name-entry .modal-input {
            max-width: 300px;
            margin: 0 auto 20px;
        }

        .prop-question-card {
            background: var(--dark-secondary);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid var(--dark-tertiary);
        }

        .prop-question-card.answered {
            border-color: var(--success);
        }

        .prop-question-number {
            font-family: 'Oswald', sans-serif;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            margin-bottom: 8px;
        }

        .prop-question-text {
            font-size: 1.1rem;
            color: var(--white);
            margin-bottom: 15px;
            font-weight: 500;
        }

        .prop-question-text.tiebreaker {
            color: var(--gold);
        }

        .prop-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .prop-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background: var(--dark);
            border: 2px solid var(--dark-tertiary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .prop-option:hover {
            border-color: var(--gold);
        }

        .prop-option.selected {
            border-color: var(--gold);
            background: rgba(212, 175, 55, 0.1);
        }

        .prop-option input[type="radio"] {
            margin-right: 12px;
            accent-color: var(--gold);
        }

        .prop-option label {
            cursor: pointer;
            flex: 1;
        }

        .prop-text-input {
            width: 100%;
            padding: 12px 15px;
            background: var(--dark);
            border: 2px solid var(--dark-tertiary);
            border-radius: 8px;
            color: var(--white);
            font-size: 1rem;
        }

        .prop-text-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        .prop-submit-section {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
        }

        .btn-large {
            padding: 15px 40px;
            font-size: 1.2rem;
        }

        .prop-stats-banner {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 25px;
            padding: 20px;
            background: linear-gradient(135deg, var(--dark-secondary) 0%, var(--dark) 100%);
            border-radius: 12px;
            border: 2px solid var(--gold);
            flex-wrap: wrap;
        }

        .prop-stat {
            text-align: center;
        }

        .prop-stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2.5rem;
            color: var(--gold);
            line-height: 1;
        }

        .prop-stat-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .payout-stat {
            min-width: 200px;
        }

        .prop-payouts-display {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-top: 8px;
            font-size: 0.9rem;
        }

        .prop-payouts-display span {
            color: rgba(255, 255, 255, 0.8);
        }

        .prop-payouts-display strong {
            color: var(--gold);
        }

        .payout-cell {
            color: var(--gold);
            font-weight: 600;
        }

        .payout-input-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .payout-input-group label {
            min-width: 80px;
            color: rgba(255, 255, 255, 0.7);
        }

        .payout-input-group input {
            max-width: 150px;
        }

        .remove-payout-btn {
            padding: 5px 10px;
            background: transparent;
            border: 1px solid #dc2626;
            color: #dc2626;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .remove-payout-btn:hover {
            background: #dc2626;
            color: white;
        }

        .payout-inputs {
            background: var(--dark);
            padding: 15px;
            border-radius: 8px;
        }

        .prop-results-table-container {
            overflow-x: auto;
        }

        .prop-results-table {
            width: 100%;
            border-collapse: collapse;
            background: var(--dark-secondary);
            border-radius: 8px;
            overflow: hidden;
        }

        .prop-results-table th,
        .prop-results-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--dark-tertiary);
        }

        .prop-results-table th {
            background: var(--dark);
            font-family: 'Oswald', sans-serif;
            color: var(--gold);
            font-weight: 500;
        }

        .prop-results-table tr:hover {
            background: rgba(212, 175, 55, 0.05);
        }

        .clickable-row {
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .clickable-row:hover {
            background: rgba(212, 175, 55, 0.15) !important;
        }

        .name-cell {
            position: relative;
        }

        .view-answers-hint {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.4);
            margin-left: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .clickable-row:hover .view-answers-hint {
            opacity: 1;
        }

        .answers-modal {
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .answers-score-summary {
            text-align: center;
            padding: 12px;
            background: var(--dark);
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .answers-score-summary strong {
            color: var(--gold);
        }

        .entry-answers-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .entry-answer-item {
            background: var(--dark);
            padding: 12px 15px;
            border-radius: 8px;
            border-left: 4px solid var(--dark-tertiary);
        }

        .entry-answer-item.answer-correct {
            border-left-color: var(--success);
            background: rgba(34, 197, 94, 0.1);
        }

        .entry-answer-item.answer-incorrect {
            border-left-color: #dc2626;
            background: rgba(220, 38, 38, 0.1);
        }

        .entry-answer-question {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 5px;
        }

        .entry-answer-value {
            font-weight: 500;
            color: var(--white);
        }

        .correct-answer-hint {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            margin-left: 8px;
        }

        .success-modal .success-icon {
            font-size: 4rem;
            text-align: center;
            margin-bottom: 10px;
        }

        .success-modal .success-message {
            text-align: center;
            font-size: 1.2rem;
            color: var(--white);
            margin-bottom: 5px;
        }

        .success-modal .success-submessage {
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 20px;
        }

        .success-modal .modal-actions {
            flex-direction: column;
            gap: 10px;
        }

        .place-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-family: 'Oswald', sans-serif;
        }

        .place-1 { background: linear-gradient(135deg, #FFD700, #FFA500); color: #000; }
        .place-2 { background: linear-gradient(135deg, #C0C0C0, #A0A0A0); color: #000; }
        .place-3 { background: linear-gradient(135deg, #CD7F32, #8B4513); color: #fff; }
        .place-other { background: var(--dark-tertiary); color: rgba(255,255,255,0.7); }

        .entries-closed-banner {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
            padding: 15px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 20px;
            font-family: 'Oswald', sans-serif;
            font-size: 1.1rem;
        }

        .no-questions-message {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
            font-size: 1.1rem;
        }

        /* Admin Prop Bets Section */
        .admin-prop-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid var(--dark-tertiary);
        }

        .admin-prop-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .admin-prop-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.8rem;
            color: var(--gold);
        }

        .add-question-form {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .form-group {
            flex: 1;
            min-width: 200px;
        }

        .form-group label {
            display: block;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            background: var(--dark-secondary);
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
            color: var(--white);
            font-size: 0.95rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--gold);
        }

        .question-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .admin-question-item {
            background: var(--dark);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 15px;
        }

        .question-reorder-btns {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .reorder-btn {
            padding: 4px 8px;
            background: var(--dark-tertiary);
            border: 1px solid var(--dark-tertiary);
            color: rgba(255, 255, 255, 0.7);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            transition: all 0.2s ease;
        }

        .reorder-btn:hover:not(:disabled) {
            background: var(--gold);
            color: var(--dark);
            border-color: var(--gold);
        }

        .reorder-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .admin-question-info {
            flex: 1;
        }

        .admin-question-text {
            font-weight: 500;
            margin-bottom: 5px;
        }

        .admin-question-meta {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
        }

        .admin-question-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .prop-entries-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .prop-entries-table th,
        .prop-entries-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid var(--dark-tertiary);
            font-size: 0.85rem;
        }

        .prop-entries-table th {
            background: var(--dark);
            color: var(--gold);
        }

        .correct-answer {
            background: rgba(34, 197, 94, 0.2);
        }

        .incorrect-answer {
            background: rgba(239, 68, 68, 0.1);
        }

        .prop-stats-banner {
            display: flex;
            justify-content: center;
            gap: 30px;
            padding: 20px;
            background: var(--dark-secondary);
            border-radius: 12px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .prop-stat {
            text-align: center;
        }

        .prop-stat-value {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 2rem;
            color: var(--gold);
        }

        .prop-stat-label {
            font-family: 'Oswald', sans-serif;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .payout-stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .prop-payouts-display {
            display: flex;
            gap: 15px;
            margin-top: 8px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .prop-payouts-display span {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .prop-payouts-display strong {
            color: var(--gold);
        }

        .payout-inputs {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .payout-input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            min-width: 120px;
        }

        .payout-input-group label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .payout-input-group input {
            width: 100px;
        }

        /* Loading State */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid var(--dark-tertiary);
            border-top-color: var(--gold);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .error-message {
            background: rgba(196, 30, 58, 0.2);
            border: 1px solid var(--red);
            color: var(--white);
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Admin Customization Sections */
        .admin-section-card {
            background: var(--dark-secondary);
            border-radius: 12px;
            padding: 25px;
            border: 2px solid var(--dark-tertiary);
            margin-bottom: 30px;
        }

        .admin-section-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 1.5rem;
            color: var(--gold);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--dark-tertiary);
        }

        .team-settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .team-config {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
        }

        .team-config-title {
            font-family: 'Oswald', sans-serif;
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .team-preview {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.9rem;
        }

        .config-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .config-row:last-child {
            margin-bottom: 0;
        }

        .config-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            min-width: 100px;
        }

        .config-input {
            flex: 1;
            padding: 10px 12px;
            background: var(--dark-secondary);
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
            color: var(--white);
            font-size: 0.95rem;
            transition: border-color 0.2s ease;
        }

        .config-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        .color-picker-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
        }

        .color-picker {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            background: transparent;
        }

        .color-picker::-webkit-color-swatch-wrapper {
            padding: 0;
        }

        .color-picker::-webkit-color-swatch {
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
        }

        .color-hex {
            font-family: monospace;
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.5);
        }

        /* Score Management */
        .score-management-section {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
        }

        .score-inputs {
            display: flex;
            align-items: flex-end;
            gap: 15px;
            flex-wrap: wrap;
        }

        .score-input-group {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .score-input-label {
            font-size: 0.85rem;
            color: rgba(255, 255, 255, 0.6);
            font-family: 'Oswald', sans-serif;
        }

        .score-input {
            width: 80px;
            padding: 10px;
            background: var(--dark-secondary);
            border: 2px solid var(--dark-tertiary);
            border-radius: 6px;
            color: var(--gold);
            font-size: 1.2rem;
            font-weight: 600;
            text-align: center;
            font-family: 'Bebas Neue', sans-serif;
        }

        .score-input:focus {
            outline: none;
            border-color: var(--gold);
        }

        .score-input.small {
            width: 60px;
            padding: 8px;
            font-size: 1rem;
        }

        .score-input.quarter-select {
            width: 70px;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23D4AF37' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            padding-right: 25px;
        }

        .quarter-score-buttons {
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .btn-danger {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
        }

        .btn-danger:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .quarter-scores-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .quarter-score-card {
            background: var(--dark);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .quarter-score-title {
            font-family: 'Oswald', sans-serif;
            font-size: 1rem;
            color: var(--gold);
            margin-bottom: 12px;
        }

        .quarter-score-inputs {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 12px;
        }

        .score-dash {
            color: rgba(255, 255, 255, 0.4);
            font-size: 1.2rem;
        }

        .quarter-winner-display {
            margin-top: 10px;
            font-size: 0.85rem;
            color: var(--success);
            font-weight: 500;
            min-height: 20px;
        }

        /* Quarter Numbers Editor */
        .quarter-editor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .quarter-edit-card {
            background: var(--dark);
            padding: 20px;
            border-radius: 8px;
        }

        .quarter-edit-title {
            font-family: 'Oswald', sans-serif;
            font-size: 1.1rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-align: center;
        }

        .numbers-edit-row {
            margin-bottom: 15px;
        }

        .numbers-edit-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 8px;
        }

        .numbers-edit-grid {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 4px;
        }

        .number-input {
            width: 100%;
            aspect-ratio: 1;
            text-align: center;
            background: var(--dark-secondary);
            border: 1px solid var(--dark-tertiary);
            border-radius: 4px;
            color: var(--gold);
            font-weight: 600;
            font-size: 0.85rem;
            padding: 0;
        }

        .number-input:focus {
            outline: none;
            border-color: var(--gold);
            background: var(--dark-tertiary);
        }

        .number-input::placeholder {
            color: rgba(255, 255, 255, 0.2);
        }

        .quarter-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .quarter-actions .btn {
            flex: 1;
            padding: 8px 12px;
            font-size: 0.85rem;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        .btn-danger {
            background: rgba(196, 30, 58, 0.3);
            border: 1px solid var(--red);
            color: var(--white);
        }

        .btn-danger:hover {
            background: rgba(196, 30, 58, 0.5);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <header class="header">
            <h1 class="logo">DREWLA'S 2026 SUPERBOWL SQUARES</h1>
            <div class="header-badges">
                <div class="price-badge">$25 PER SQUARE</div>
                <div class="price-badge prop-badge">$5 PER PROP SHEET</div>
            </div>
            <div class="payouts-info">
                <span class="payouts-label">PAYOUTS:</span>
                <span class="payout-item"><strong>Q1:</strong> $500</span>
                <span class="payout-divider">â€¢</span>
                <span class="payout-item"><strong>Q2:</strong> $625</span>
                <span class="payout-divider">â€¢</span>
                <span class="payout-item"><strong>Q3:</strong> $500</span>
                <span class="payout-divider">â€¢</span>
                <span class="payout-item"><strong>Q4:</strong> $875</span>
            </div>
            <div class="winners-display" id="winnersDisplay">
                <span class="winners-label">WINNERS:</span>
                <span class="winner-item"><strong>Q1:</strong> <span class="winner-name pending" id="winnerQ1">TBD</span></span>
                <span class="payout-divider">â€¢</span>
                <span class="winner-item"><strong>Q2:</strong> <span class="winner-name pending" id="winnerQ2">TBD</span></span>
                <span class="payout-divider">â€¢</span>
                <span class="winner-item"><strong>Q3:</strong> <span class="winner-name pending" id="winnerQ3">TBD</span></span>
                <span class="payout-divider">â€¢</span>
                <span class="winner-item"><strong>Q4:</strong> <span class="winner-name pending" id="winnerQ4">TBD</span></span>
            </div>
            <!-- Prop Bets Top 5 Standings -->
            <div class="prop-standings-header" id="propStandingsHeader">
                <span class="prop-standings-label">ðŸŽ¯ PROP BETS TOP 5:</span>
                <div class="prop-standings-list" id="propStandingsHeaderList">
                    <span class="prop-standing-item">No entries yet</span>
                </div>
            </div>
            <div class="current-score-display" id="currentScoreDisplay" style="display: none;">
                <div class="score-team">
                    <div class="score-team-name" id="scoreTeamX">NFC</div>
                    <div class="score-value" id="scoreValueX">0</div>
                </div>
                <div class="score-separator">-</div>
                <div class="score-team">
                    <div class="score-team-name" id="scoreTeamY">AFC</div>
                    <div class="score-value" id="scoreValueY">0</div>
                </div>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav class="main-nav">
            <button class="nav-tab active" id="navSquares" onclick="showSection('squares')">ðŸˆ Squares</button>
            <button class="nav-tab" id="navPropBets" onclick="showSection('propbets')">ðŸŽ¯ Prop Bets</button>
        </nav>

        <!-- Squares Section -->
        <div id="squaresSection">
            <div class="stats-bar">
            <div class="stat-item">
                <div class="stat-value" id="availableCount">100</div>
                <div class="stat-label">Available</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="takenCount">0</div>
                <div class="stat-label">Taken</div>
            </div>
        </div>

        <div id="loadingState" class="loading">
            <div class="spinner"></div>
            <p>Loading squares...</p>
        </div>

        <div id="errorState" class="error-message" style="display: none;"></div>

        <!-- Main Grid Section -->
        <section id="gridSection" class="grid-section" style="display: none;">
            <div class="grid-container">
                <!-- Scroll hint for mobile -->
                <div class="scroll-hint">â† Swipe to see full grid â†’</div>

                <!-- Status Legend -->
                <div class="status-legend">
                    <div class="status-legend-title">Status:</div>
                    <div class="status-legend-items">
                        <div class="status-legend-item">
                            <div class="status-legend-box in-money-box"></div>
                            <span>In Money</span>
                        </div>
                        <div class="status-legend-item">
                            <div class="status-legend-box winner-q1-box"></div>
                            <span>Q1</span>
                        </div>
                        <div class="status-legend-item">
                            <div class="status-legend-box winner-q2-box"></div>
                            <span>Q2</span>
                        </div>
                        <div class="status-legend-item">
                            <div class="status-legend-box winner-q3-box"></div>
                            <span>Q3</span>
                        </div>
                        <div class="status-legend-item">
                            <div class="status-legend-box winner-q4-box"></div>
                            <span>Q4</span>
                        </div>
                    </div>
                </div>

                <!-- NFC Team Header (Top) -->
                <div class="teams-header">
                    <span class="team-name team-x" id="teamXName">NFC TEAM</span>
                </div>

                <div class="squares-wrapper">
                    <!-- AFC Team Label (Side) -->
                    <div class="team-y-wrapper">
                        <span class="team-name team-y" id="teamYName">AFC TEAM</span>
                    </div>
                    
                    <div class="squares-grid" id="squaresGrid">
                        <!-- Grid will be generated by JavaScript -->
                    </div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color available"></div>
                        <span>Available</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color selected"></div>
                        <span>Your Selection</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color taken"></div>
                        <span>Taken</span>
                    </div>
                </div>
            </div>

            <!-- Admin Login at Bottom -->
            <div class="admin-footer">
                <button class="admin-login-btn" id="adminLoginBtn">Admin Login</button>
            </div>
        </section>
        </div><!-- End Squares Section -->

        <!-- Prop Bets Section -->
        <div id="propBetsSection" style="display: none;">
            <div class="prop-bets-container">
                <!-- Entry Form (shown when entries are open) -->
                <div id="propBetsForm" class="prop-bets-form">
                    <h2 class="prop-bets-title">ðŸŽ¯ Super Bowl Prop Bets</h2>
                    <p class="prop-bets-subtitle">$5 Entry Fee â€¢ Answer all questions to submit</p>
                    
                    <div class="prop-name-entry" id="propNameEntry">
                        <label class="prop-label">Enter Your Name to Begin:</label>
                        <input type="text" class="modal-input" id="propBetName" placeholder="Your Name" maxlength="30">
                        <button class="btn btn-primary" id="startPropBetsBtn">Start Prop Bets</button>
                    </div>

                    <div id="propQuestionsContainer" style="display: none;">
                        <div id="propQuestionsList">
                            <!-- Questions will be rendered here -->
                        </div>
                        <div class="prop-submit-section">
                            <button class="btn btn-primary btn-large" id="submitPropBetsBtn">Submit Prop Bets ($5)</button>
                        </div>
                    </div>
                </div>

                <!-- Results Table (shown when entries are closed) -->
                <div id="propBetsResults" style="display: none;">
                    <h2 class="prop-bets-title">ðŸ† Prop Bets Leaderboard</h2>
                    
                    <!-- Stats Banner -->
                    <div class="prop-stats-banner">
                        <div class="prop-stat">
                            <div class="prop-stat-value" id="propResultsEntryCount">0</div>
                            <div class="prop-stat-label">Entries</div>
                        </div>
                        <div class="prop-stat">
                            <div class="prop-stat-value">$<span id="propResultsTotalPot">0</span></div>
                            <div class="prop-stat-label">Total Pot</div>
                        </div>
                        <div class="prop-stat payout-stat">
                            <div class="prop-stat-label">Payouts</div>
                            <div class="prop-payouts-display" id="propPayoutsDisplay">
                                <!-- Will be dynamically populated -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="prop-results-table-container">
                        <table class="prop-results-table">
                            <thead>
                                <tr>
                                    <th>Place</th>
                                    <th>Name</th>
                                    <th>Correct</th>
                                    <th>Tiebreaker</th>
                                    <th>Payout</th>
                                </tr>
                            </thead>
                            <tbody id="propResultsBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Admin Login for Prop Bets -->
                <div class="admin-footer">
                    <button class="admin-login-btn" id="propBetsAdminBtn">Admin Login</button>
                </div>
            </div>
        </div><!-- End Prop Bets Section -->

        <!-- Admin Section -->
        <section id="adminSection" class="admin-panel">
            <div class="admin-header">
                <h2 class="admin-title">Admin Dashboard</h2>
                <div class="admin-actions">
                    <button class="btn btn-secondary" id="exportBtn">Export Data</button>
                    <button class="btn btn-secondary" id="resetGridBtn">Reset All Squares</button>
                    <button class="btn btn-primary" id="backToGridBtn">Back to Grid</button>
                </div>
            </div>

            <!-- Team Customization -->
            <div class="admin-section-card">
                <h3 class="admin-section-title">Team Settings</h3>
                <div class="team-settings">
                    <div class="team-config">
                        <div class="team-config-title">
                            NFC Team (Columns - Top) 
                            <span class="team-preview" id="teamXPreview">NFC TEAM</span>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Team Name</span>
                            <input type="text" class="config-input" id="teamXNameInput" placeholder="e.g., Eagles" maxlength="20">
                        </div>
                        <div class="config-row">
                            <span class="config-label">Background</span>
                            <div class="color-picker-wrapper">
                                <input type="color" class="color-picker" id="teamXBgColor" value="#ffffff">
                                <span class="color-hex" id="teamXBgHex">#ffffff</span>
                            </div>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Text Color</span>
                            <div class="color-picker-wrapper">
                                <input type="color" class="color-picker" id="teamXTextColor" value="#0a0a0a">
                                <span class="color-hex" id="teamXTextHex">#0a0a0a</span>
                            </div>
                        </div>
                    </div>
                    <div class="team-config">
                        <div class="team-config-title">
                            AFC Team (Rows - Side)
                            <span class="team-preview" id="teamYPreview">AFC TEAM</span>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Team Name</span>
                            <input type="text" class="config-input" id="teamYNameInput" placeholder="e.g., Chiefs" maxlength="20">
                        </div>
                        <div class="config-row">
                            <span class="config-label">Background</span>
                            <div class="color-picker-wrapper">
                                <input type="color" class="color-picker" id="teamYBgColor" value="#D4AF37">
                                <span class="color-hex" id="teamYBgHex">#D4AF37</span>
                            </div>
                        </div>
                        <div class="config-row">
                            <span class="config-label">Text Color</span>
                            <div class="color-picker-wrapper">
                                <input type="color" class="color-picker" id="teamYTextColor" value="#0a0a0a">
                                <span class="color-hex" id="teamYTextHex">#0a0a0a</span>
                            </div>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px; text-align: center;">
                    <button class="btn btn-primary" id="saveTeamSettingsBtn">Save Team Settings</button>
                </div>
            </div>

            <!-- Score Management -->
            <div class="admin-section-card">
                <h3 class="admin-section-title">Score Management</h3>
                
                <!-- Current Score -->
                <div class="score-management-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin-bottom: 15px;">Current Game Score</h4>
                    <p style="color: rgba(255,255,255,0.5); margin-bottom: 15px; font-size: 0.85rem;">
                        Select the current quarter and enter the score to highlight who is "In the Money" on the grid.
                    </p>
                    <div class="score-inputs">
                        <div class="score-input-group">
                            <label class="score-input-label">Current Quarter</label>
                            <select class="score-input quarter-select" id="currentQuarterSelect">
                                <option value="1">Q1</option>
                                <option value="2">Q2</option>
                                <option value="3">Q3</option>
                                <option value="4">Q4</option>
                            </select>
                        </div>
                        <div class="score-input-group">
                            <label class="score-input-label" id="currentScoreLabelX">NFC Score</label>
                            <input type="number" class="score-input" id="currentScoreX" min="0" max="99" value="0">
                        </div>
                        <div class="score-input-group">
                            <label class="score-input-label" id="currentScoreLabelY">AFC Score</label>
                            <input type="number" class="score-input" id="currentScoreY" min="0" max="99" value="0">
                        </div>
                        <button class="btn btn-primary btn-small" id="updateCurrentScoreBtn">Update Score</button>
                        <button class="btn btn-secondary btn-small" id="clearCurrentScoreBtn">Clear</button>
                    </div>
                </div>

                <!-- Quarter Final Scores -->
                <div class="score-management-section" style="margin-top: 30px;">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin-bottom: 15px;">Quarter Final Scores</h4>
                    <p style="color: rgba(255,255,255,0.5); margin-bottom: 15px; font-size: 0.85rem;">
                        Enter the final score at the end of each quarter to lock in winners.
                    </p>
                    <div class="quarter-scores-grid">
                        <div class="quarter-score-card">
                            <div class="quarter-score-title">Q1 Final</div>
                            <div class="quarter-score-inputs">
                                <input type="number" class="score-input small" id="q1ScoreX" min="0" max="99" placeholder="NFC">
                                <span class="score-dash">-</span>
                                <input type="number" class="score-input small" id="q1ScoreY" min="0" max="99" placeholder="AFC">
                            </div>
                            <div class="quarter-score-buttons">
                                <button class="btn btn-secondary btn-small" onclick="saveQuarterScore(1)">Save Q1</button>
                                <button class="btn btn-danger btn-small" onclick="clearQuarterScore(1)">Clear</button>
                            </div>
                            <div class="quarter-winner-display" id="q1WinnerDisplay"></div>
                        </div>
                        <div class="quarter-score-card">
                            <div class="quarter-score-title">Q2 Final (Halftime)</div>
                            <div class="quarter-score-inputs">
                                <input type="number" class="score-input small" id="q2ScoreX" min="0" max="99" placeholder="NFC">
                                <span class="score-dash">-</span>
                                <input type="number" class="score-input small" id="q2ScoreY" min="0" max="99" placeholder="AFC">
                            </div>
                            <div class="quarter-score-buttons">
                                <button class="btn btn-secondary btn-small" onclick="saveQuarterScore(2)">Save Q2</button>
                                <button class="btn btn-danger btn-small" onclick="clearQuarterScore(2)">Clear</button>
                            </div>
                            <div class="quarter-winner-display" id="q2WinnerDisplay"></div>
                        </div>
                        <div class="quarter-score-card">
                            <div class="quarter-score-title">Q3 Final</div>
                            <div class="quarter-score-inputs">
                                <input type="number" class="score-input small" id="q3ScoreX" min="0" max="99" placeholder="NFC">
                                <span class="score-dash">-</span>
                                <input type="number" class="score-input small" id="q3ScoreY" min="0" max="99" placeholder="AFC">
                            </div>
                            <div class="quarter-score-buttons">
                                <button class="btn btn-secondary btn-small" onclick="saveQuarterScore(3)">Save Q3</button>
                                <button class="btn btn-danger btn-small" onclick="clearQuarterScore(3)">Clear</button>
                            </div>
                            <div class="quarter-winner-display" id="q3WinnerDisplay"></div>
                        </div>
                        <div class="quarter-score-card">
                            <div class="quarter-score-title">Q4 Final (Game End)</div>
                            <div class="quarter-score-inputs">
                                <input type="number" class="score-input small" id="q4ScoreX" min="0" max="99" placeholder="NFC">
                                <span class="score-dash">-</span>
                                <input type="number" class="score-input small" id="q4ScoreY" min="0" max="99" placeholder="AFC">
                            </div>
                            <div class="quarter-score-buttons">
                                <button class="btn btn-secondary btn-small" onclick="saveQuarterScore(4)">Save Q4</button>
                                <button class="btn btn-danger btn-small" onclick="clearQuarterScore(4)">Clear</button>
                            </div>
                            <div class="quarter-winner-display" id="q4WinnerDisplay"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quarter Numbers Editor -->
            <div class="admin-section-card">
                <h3 class="admin-section-title">Quarter Numbers</h3>
                <p style="color: rgba(255,255,255,0.5); margin-bottom: 20px; font-size: 0.9rem;">
                    Enter numbers 0-9 for each position, or use "Random" to auto-generate. Leave as "?" until ready to reveal.
                </p>
                <div class="quarter-editor" id="quarterEditor">
                    <!-- Quarter edit cards will be generated -->
                </div>
            </div>

            <!-- Participants Table -->
            <div class="admin-section-card">
                <h3 class="admin-section-title">Participants & Payments</h3>
                <div class="admin-table-container">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Squares</th>
                                <th>Total Due</th>
                                <th>Status</th>
                                <th>Action</th>
                                <th>Remove</th>
                            </tr>
                        </thead>
                        <tbody id="adminTableBody">
                            <!-- Rows will be generated -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Prop Bets Management -->
            <div class="admin-section-card">
                <h3 class="admin-section-title">ðŸŽ¯ Prop Bets Management</h3>
                
                <div class="prop-admin-controls">
                    <div class="prop-status-toggle">
                        <label class="prop-toggle-label">Accept Entries:</label>
                        <button class="btn btn-secondary" id="togglePropEntriesBtn">Close Entries</button>
                        <span class="prop-status-indicator" id="propStatusIndicator">âœ… Open</span>
                    </div>
                </div>

                <!-- Add New Question -->
                <div class="add-question-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin-bottom: 15px;">Add New Question</h4>
                    <div class="question-form">
                        <div class="form-row">
                            <label>Question Text:</label>
                            <input type="text" class="modal-input" id="newQuestionText" placeholder="e.g., What color will the Gatorade be?">
                        </div>
                        <div class="form-row">
                            <label>Question Type:</label>
                            <select class="modal-input" id="newQuestionType">
                                <option value="multiple">Multiple Choice</option>
                                <option value="text">Free Text</option>
                                <option value="number">Number (Tiebreaker)</option>
                            </select>
                        </div>
                        <div class="form-row" id="optionsRow">
                            <label>Options (comma separated):</label>
                            <input type="text" class="modal-input" id="newQuestionOptions" placeholder="e.g., Orange, Blue, Yellow, Red, Clear">
                        </div>
                        <div class="form-row">
                            <label>
                                <input type="checkbox" id="isTiebreaker"> This is the tiebreaker question
                            </label>
                        </div>
                        <button class="btn btn-primary" id="addQuestionBtn">Add Question</button>
                    </div>
                </div>

                <!-- Questions List -->
                <div class="questions-list-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin: 20px 0 15px;">Current Questions</h4>
                    <div id="adminQuestionsList">
                        <!-- Questions will be listed here -->
                    </div>
                </div>

                <!-- Prop Bet Entries -->
                <div class="prop-entries-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin: 20px 0 15px;">Prop Bet Entries (<span id="propEntryCount">0</span>) - Total Pot: $<span id="propTotalPot">0</span></h4>
                    <div class="prop-entries-table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Submitted</th>
                                    <th>Correct</th>
                                    <th>Paid</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="propEntriesBody">
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Payout Structure -->
                <div class="payout-structure-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin: 20px 0 15px;">Payout Structure</h4>
                    <p style="color: rgba(255,255,255,0.5); margin-bottom: 15px; font-size: 0.85rem;">
                        Enter payout percentages or fixed amounts. Use % for percentage (e.g., "50%") or numbers for fixed amounts (e.g., "25").
                    </p>
                    <div class="payout-inputs" id="payoutInputsContainer">
                        <!-- Payout inputs will be dynamically generated -->
                    </div>
                    <div style="margin-top: 15px; display: flex; gap: 10px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" id="addPayoutBtn">+ Add Place</button>
                        <button class="btn btn-primary" id="savePayoutStructureBtn">Save Payout Structure</button>
                    </div>
                </div>

                <!-- Set Correct Answers -->
                <div class="correct-answers-section">
                    <h4 style="color: var(--gold); font-family: 'Oswald', sans-serif; margin: 20px 0 15px;">Set Correct Answers</h4>
                    <div id="correctAnswersForm">
                        <!-- Will be populated with questions -->
                    </div>
                    <button class="btn btn-primary" id="saveCorrectAnswersBtn" style="margin-top: 15px;">Save Correct Answers</button>
                </div>
            </div>
        </section>
    </div>

    <!-- Selection Panel -->
    <div class="selection-panel" id="selectionPanel">
        <div class="selection-content">
            <div class="selection-info">
                <div class="selection-count"><span id="selectedCount">0</span> Squares Selected</div>
                <div class="selection-total">Total: $<span id="selectedTotal">0</span></div>
            </div>
            <div class="selection-actions">
                <button class="btn btn-secondary" id="clearSelectionBtn">Clear</button>
                <button class="btn btn-primary" id="confirmSelectionBtn">Confirm Selection</button>
            </div>
        </div>
    </div>

    <!-- Name Entry Modal -->
    <div class="modal-overlay" id="nameModal">
        <div class="modal">
            <h2 class="modal-title">Enter Your Name</h2>
            <input type="text" class="modal-input" id="playerName" placeholder="Your Name" maxlength="15">
            <div class="modal-summary">
                <div class="summary-row">
                    <span>Squares Selected</span>
                    <span id="summaryCount">0</span>
                </div>
                <div class="summary-row">
                    <span>Price per Square</span>
                    <span>$25</span>
                </div>
                <div class="summary-row">
                    <span>Total Amount</span>
                    <span>$<span id="summaryTotal">0</span></span>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelNameBtn">Cancel</button>
                <button class="btn btn-primary" id="submitNameBtn">Lock In Squares</button>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div class="modal-overlay" id="successModal">
        <div class="modal">
            <div class="success-icon">ðŸˆ</div>
            <h2 class="modal-title">Squares Locked In!</h2>
            <p style="text-align: center; color: rgba(255,255,255,0.7); margin-bottom: 10px;">
                You've successfully claimed <strong id="successCount">0</strong> squares!
            </p>
            <p style="text-align: center; color: var(--gold); font-size: 1.3rem; font-family: 'Oswald', sans-serif; margin-bottom: 20px;">
                Total Due: $<span id="successTotal">0</span>
            </p>
            <div class="payment-info">
                <p style="text-align: center; margin-bottom: 15px; color: rgba(255,255,255,0.6);">Please send payment to:</p>
                <div class="payment-method">
                    <div class="payment-icon">V</div>
                    <div class="payment-details">
                        <div class="payment-label">Venmo</div>
                        <div class="payment-value">@drew-labelle</div>
                    </div>
                </div>
                <div class="payment-method">
                    <div class="payment-icon">Z</div>
                    <div class="payment-details">
                        <div class="payment-label">Zelle</div>
                        <div class="payment-value"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f1958394869d9093949d9d94c4b1969c90989ddf929e9c">[email&#160;protected]</a></div>
                    </div>
                </div>
            </div>
            <button class="btn btn-primary" style="width: 100%;" id="closeSuccessBtn">Got It!</button>
        </div>
    </div>

    <!-- Admin Password Modal -->
    <div class="modal-overlay" id="passwordModal">
        <div class="modal">
            <h2 class="modal-title">Admin Access</h2>
            <input type="password" class="password-input" id="adminPassword" placeholder="Enter Admin Password">
            <div class="modal-actions">
                <button class="btn btn-secondary" id="cancelPasswordBtn">Cancel</button>
                <button class="btn btn-primary" id="submitPasswordBtn">Access Admin</button>
            </div>
        </div>
    </div>

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // ============================================
        // FIREBASE CONFIGURATION
        // ============================================
        // IMPORTANT: Replace with your Firebase config
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyCw5hIv0bJIcnNXo58NspE7cZVckEu1p88",
  authDomain: "superbowl-squares-f381e.firebaseapp.com",
  databaseURL: "https://superbowl-squares-f381e-default-rtdb.firebaseio.com",
  projectId: "superbowl-squares-f381e",
  storageBucket: "superbowl-squares-f381e.firebasestorage.app",
  messagingSenderId: "1017356821100",
  appId: "1:1017356821100:web:4d1c66c37441510b166e49",
  measurementId: "G-4P5C6GL7SY"
};

        // Admin password
        const ADMIN_PASSWORD = "Bork55";

        // ============================================
        // APP STATE
        // ============================================
        let db = null;
        let isFirebaseConnected = false;
        let selectedSquares = new Set();
        let squaresData = {};
        let quarterNumbers = {
            1: { x: Array(10).fill('?'), y: Array(10).fill('?') },
            2: { x: Array(10).fill('?'), y: Array(10).fill('?') },
            3: { x: Array(10).fill('?'), y: Array(10).fill('?') },
            4: { x: Array(10).fill('?'), y: Array(10).fill('?') }
        };
        let participants = {};
        let isAdmin = false;
        let teamSettings = { 
            x: { name: 'NFC TEAM', bgColor: '#ffffff', textColor: '#0a0a0a' },
            y: { name: 'AFC TEAM', bgColor: '#D4AF37', textColor: '#0a0a0a' }
        };
        let currentScore = { x: null, y: null, quarter: 1 };
        let quarterScores = {
            1: { x: null, y: null, winner: null },
            2: { x: null, y: null, winner: null },
            3: { x: null, y: null, winner: null },
            4: { x: null, y: null, winner: null }
        };

        // Prop Bets State
        let propBetsQuestions = [];
        let propBetsEntries = {};
        let propBetsCorrectAnswers = {};
        let propBetsEntriesOpen = true;
        let propBetsPayoutStructure = ['50%', '30%', '20%'];
        let currentPropBetUser = null;

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded, starting init...');
            
            // Failsafe: Always show grid after 2 seconds no matter what
            setTimeout(() => {
                console.log('Failsafe timeout triggered');
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('gridSection').style.display = 'block';
            }, 2000);
            
            initializeApp();
        });

        async function initializeApp() {
            console.log('initializeApp started');
            
            try {
                // Load from localStorage first
                console.log('Loading from localStorage...');
                loadDataFromLocalStorage();
                console.log('localStorage loaded');
                
                // Show the grid right away
                console.log('Applying team colors...');
                applyTeamColors();
                console.log('Rendering grid...');
                renderGrid();
                console.log('Updating stats...');
                updateStats();
                console.log('Updating score display...');
                updateScoreDisplay();
                console.log('Updating winners display...');
                updateWinnersDisplay();
                console.log('Setting up event listeners...');
                setupEventListeners();
                console.log('All functions completed');
                
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('gridSection').style.display = 'block';
                console.log('Grid section shown');

            } catch (error) {
                console.error('Error in initializeApp:', error);
                // Force show grid even on error
                document.getElementById('loadingState').style.display = 'none';
                document.getElementById('gridSection').style.display = 'block';
            }

            // Then try to connect to Firebase in the background
            if (firebaseConfig.apiKey && firebaseConfig.apiKey !== "YOUR_API_KEY") {
                try {
                    console.log('Attempting Firebase connection...');
                    firebase.initializeApp(firebaseConfig);
                    db = firebase.database();
                    
                    // Try to load from Firebase
                    const snapshot = await db.ref('/').once('value');
                    const data = snapshot.val() || {};
                    
                    squaresData = data.squares || {};
                    quarterNumbers = data.quarterNumbers || quarterNumbers;
                    participants = data.participants || {};
                    teamSettings = data.teamSettings || teamSettings;
                    currentScore = data.currentScore || currentScore;
                    quarterScores = data.quarterScores || quarterScores;
                    
                    isFirebaseConnected = true;
                    console.log("Firebase connected successfully");
                    
                    // Re-render with Firebase data
                    applyTeamColors();
                    renderGrid();
                    updateStats();
                    updateScoreDisplay();
                    updateWinnersDisplay();
                    
                    // Set up real-time listeners
                    setupFirebaseListeners();
                } catch (error) {
                    console.warn("Firebase connection failed:", error);
                }
            }
        }

        function setupFirebaseListeners() {
            db.ref('/squares').on('value', (snapshot) => {
                squaresData = snapshot.val() || {};
                renderGrid();
                updateStats();
            });

            db.ref('/quarterNumbers').on('value', (snapshot) => {
                quarterNumbers = snapshot.val() || quarterNumbers;
                renderGrid();
                if (isAdmin) renderQuarterEditor();
            });

            db.ref('/participants').on('value', (snapshot) => {
                participants = snapshot.val() || {};
                if (isAdmin) renderAdminTable();
            });

            db.ref('/teamSettings').on('value', (snapshot) => {
                teamSettings = snapshot.val() || teamSettings;
                applyTeamColors();
                renderGrid();
                if (isAdmin) populateTeamSettingsForm();
            });

            db.ref('/currentScore').on('value', (snapshot) => {
                currentScore = snapshot.val() || { x: null, y: null, quarter: 1 };
                renderGrid();
                updateScoreDisplay();
            });

            db.ref('/quarterScores').on('value', (snapshot) => {
                quarterScores = snapshot.val() || quarterScores;
                renderGrid();
                updateWinnersDisplay();
                if (isAdmin) populateQuarterScores();
            });

            // Prop Bets listeners
            db.ref('/propBetsQuestions').on('value', (snapshot) => {
                propBetsQuestions = snapshot.val() || [];
                if (isAdmin) {
                    renderAdminQuestionsList();
                    renderCorrectAnswersForm();
                }
            });

            db.ref('/propBetsEntries').on('value', (snapshot) => {
                propBetsEntries = snapshot.val() || {};
                if (isAdmin) renderPropEntriesTable();
                renderPropBetsLeaderboard();
            });

            db.ref('/propBetsCorrectAnswers').on('value', (snapshot) => {
                propBetsCorrectAnswers = snapshot.val() || {};
                if (isAdmin) renderCorrectAnswersForm();
                renderPropBetsLeaderboard();
            });

            db.ref('/propBetsEntriesOpen').on('value', (snapshot) => {
                propBetsEntriesOpen = snapshot.val() !== undefined ? snapshot.val() : true;
                if (isAdmin) updatePropEntriesStatus();
                renderPropBetsPage();
            });

            db.ref('/propBetsPayoutStructure').on('value', (snapshot) => {
                const val = snapshot.val();
                if (val) {
                    if (Array.isArray(val)) {
                        propBetsPayoutStructure = val;
                    } else {
                        propBetsPayoutStructure = [val.first || '50%', val.second || '30%', val.third || '20%'];
                    }
                }
                if (isAdmin) populatePayoutStructure();
                renderPropBetsLeaderboard();
            });
        }

        // ============================================
        // DATA PERSISTENCE
        // ============================================
        function loadDataFromLocalStorage() {
            const savedData = localStorage.getItem('superbowlSquares');
            if (savedData) {
                const data = JSON.parse(savedData);
                squaresData = data.squares || {};
                quarterNumbers = data.quarterNumbers || quarterNumbers;
                participants = data.participants || {};
                teamSettings = data.teamSettings || teamSettings;
                currentScore = data.currentScore || currentScore;
                quarterScores = data.quarterScores || quarterScores;
                propBetsQuestions = data.propBetsQuestions || [];
                propBetsEntries = data.propBetsEntries || {};
                propBetsCorrectAnswers = data.propBetsCorrectAnswers || {};
                propBetsEntriesOpen = data.propBetsEntriesOpen !== undefined ? data.propBetsEntriesOpen : true;
                // Handle both old object format and new array format
                if (data.propBetsPayoutStructure) {
                    if (Array.isArray(data.propBetsPayoutStructure)) {
                        propBetsPayoutStructure = data.propBetsPayoutStructure;
                    } else {
                        // Convert old format to array
                        propBetsPayoutStructure = [
                            data.propBetsPayoutStructure.first || '50%',
                            data.propBetsPayoutStructure.second || '30%',
                            data.propBetsPayoutStructure.third || '20%'
                        ];
                    }
                }
            }
        }

        function saveData() {
            if (isFirebaseConnected) {
                db.ref('/').update({
                    squares: squaresData,
                    quarterNumbers: quarterNumbers,
                    participants: participants,
                    teamSettings: teamSettings,
                    currentScore: currentScore,
                    quarterScores: quarterScores,
                    propBetsQuestions: propBetsQuestions,
                    propBetsEntries: propBetsEntries,
                    propBetsCorrectAnswers: propBetsCorrectAnswers,
                    propBetsEntriesOpen: propBetsEntriesOpen,
                    propBetsPayoutStructure: propBetsPayoutStructure
                });
            } else {
                localStorage.setItem('superbowlSquares', JSON.stringify({
                    squares: squaresData,
                    quarterNumbers: quarterNumbers,
                    participants: participants,
                    teamSettings: teamSettings,
                    currentScore: currentScore,
                    quarterScores: quarterScores,
                    propBetsQuestions: propBetsQuestions,
                    propBetsEntries: propBetsEntries,
                    propBetsCorrectAnswers: propBetsCorrectAnswers,
                    propBetsEntriesOpen: propBetsEntriesOpen,
                    propBetsPayoutStructure: propBetsPayoutStructure
                }));
            }
        }

        function applyTeamColors() {
            document.documentElement.style.setProperty('--team-x-bg', teamSettings.x.bgColor);
            document.documentElement.style.setProperty('--team-x-text', teamSettings.x.textColor);
            document.documentElement.style.setProperty('--team-y-bg', teamSettings.y.bgColor);
            document.documentElement.style.setProperty('--team-y-text', teamSettings.y.textColor);
            
            document.getElementById('teamXName').textContent = teamSettings.x.name;
            document.getElementById('teamYName').textContent = teamSettings.y.name;
        }

        // ============================================
        // GRID RENDERING
        // ============================================
        function renderGrid() {
            const grid = document.getElementById('squaresGrid');
            grid.innerHTML = '';

            // Calculate "in the money" position using selected quarter
            let inTheMoneyX = null;
            let inTheMoneyY = null;
            if (currentScore.x !== null && currentScore.y !== null) {
                const lastDigitX = currentScore.x % 10;
                const lastDigitY = currentScore.y % 10;
                const activeQuarter = currentScore.quarter || 1;
                // Find column (x) where the number matches lastDigitX
                for (let i = 0; i < 10; i++) {
                    if (quarterNumbers[activeQuarter] && quarterNumbers[activeQuarter].x[i] == lastDigitX) {
                        inTheMoneyX = i;
                    }
                    if (quarterNumbers[activeQuarter] && quarterNumbers[activeQuarter].y[i] == lastDigitY) {
                        inTheMoneyY = i;
                    }
                }
            }

            // Calculate winner positions for each quarter
            const quarterWinners = {};
            for (let q = 1; q <= 4; q++) {
                if (quarterScores[q] && quarterScores[q].x !== null && quarterScores[q].y !== null) {
                    const lastDigitX = quarterScores[q].x % 10;
                    const lastDigitY = quarterScores[q].y % 10;
                    let winX = null, winY = null;
                    for (let i = 0; i < 10; i++) {
                        if (quarterNumbers[q] && quarterNumbers[q].x[i] == lastDigitX) winX = i;
                        if (quarterNumbers[q] && quarterNumbers[q].y[i] == lastDigitY) winY = i;
                    }
                    if (winX !== null && winY !== null) {
                        quarterWinners[q] = { x: winX, y: winY };
                    }
                }
            }

            // Corner cell with quarter key only
            const corner = document.createElement('div');
            corner.className = 'number-header corner';
            corner.innerHTML = `
                <div class="corner-quarter-key">
                    <div class="corner-q q1">Q1</div>
                    <div class="corner-q q2">Q2</div>
                    <div class="corner-q q3">Q3</div>
                    <div class="corner-q q4">Q4</div>
                </div>
            `;
            grid.appendChild(corner);

            // Top row (X axis - team X numbers)
            for (let i = 0; i < 10; i++) {
                const header = document.createElement('div');
                header.className = 'number-header';
                header.innerHTML = `
                    <div class="quarter-numbers">
                        <div class="quarter-num q1">${quarterNumbers[1].x[i]}</div>
                        <div class="quarter-num q2">${quarterNumbers[2].x[i]}</div>
                        <div class="quarter-num q3">${quarterNumbers[3].x[i]}</div>
                        <div class="quarter-num q4">${quarterNumbers[4].x[i]}</div>
                    </div>
                `;
                grid.appendChild(header);
            }

            // Grid rows
            for (let y = 0; y < 10; y++) {
                // Row header (Y axis - team Y numbers)
                const rowHeader = document.createElement('div');
                rowHeader.className = 'row-header';
                rowHeader.innerHTML = `
                    <div class="quarter-numbers">
                        <div class="quarter-num q1">${quarterNumbers[1].y[y]}</div>
                        <div class="quarter-num q2">${quarterNumbers[2].y[y]}</div>
                        <div class="quarter-num q3">${quarterNumbers[3].y[y]}</div>
                        <div class="quarter-num q4">${quarterNumbers[4].y[y]}</div>
                    </div>
                `;
                grid.appendChild(rowHeader);

                // Squares
                for (let x = 0; x < 10; x++) {
                    const squareId = `${x}-${y}`;
                    const square = document.createElement('div');
                    square.className = 'square';
                    square.dataset.id = squareId;

                    let winnerBadges = [];
                    const isInTheMoney = inTheMoneyX === x && inTheMoneyY === y;

                    if (squaresData[squareId]) {
                        square.classList.add('taken');
                        square.textContent = squaresData[squareId];

                        // Check if this square won any quarter
                        for (let q = 1; q <= 4; q++) {
                            if (quarterWinners[q] && quarterWinners[q].x === x && quarterWinners[q].y === y) {
                                winnerBadges.push(`Q${q}`);
                            }
                        }

                        // Check if "in the money" - always show this highlight regardless of past wins
                        if (isInTheMoney) {
                            square.classList.add('in-the-money');
                        } else if (winnerBadges.length > 0) {
                            // Only apply winner styling if NOT currently in the money
                            square.classList.add(`winner-q${winnerBadges[winnerBadges.length - 1].replace('Q', '')}`);
                        }

                        // Add winner badges
                        if (winnerBadges.length > 0) {
                            const badge = document.createElement('span');
                            badge.className = 'winner-badge';
                            badge.textContent = winnerBadges.join(',');
                            square.appendChild(badge);
                        }
                    } else if (selectedSquares.has(squareId)) {
                        square.classList.add('selected');
                    }

                    square.addEventListener('click', () => handleSquareClick(squareId));
                    grid.appendChild(square);
                }
            }
        }

        function getActiveQuarter() {
            // Determine which quarter we're in based on which scores are set
            if (quarterScores[4] && quarterScores[4].x !== null) return 4;
            if (quarterScores[3] && quarterScores[3].x !== null) return 4;
            if (quarterScores[2] && quarterScores[2].x !== null) return 3;
            if (quarterScores[1] && quarterScores[1].x !== null) return 2;
            return 1;
        }

        // ============================================
        // SQUARE SELECTION
        // ============================================
        function handleSquareClick(squareId) {
            if (squaresData[squareId]) return; // Already taken

            if (selectedSquares.has(squareId)) {
                selectedSquares.delete(squareId);
            } else {
                selectedSquares.add(squareId);
            }

            renderGrid();
            updateSelectionPanel();
        }

        function updateSelectionPanel() {
            const panel = document.getElementById('selectionPanel');
            const count = selectedSquares.size;

            if (count > 0) {
                panel.classList.add('active');
                document.getElementById('selectedCount').textContent = count;
                document.getElementById('selectedTotal').textContent = count * 25;
            } else {
                panel.classList.remove('active');
            }
        }

        function clearSelection() {
            selectedSquares.clear();
            renderGrid();
            updateSelectionPanel();
        }

        // ============================================
        // PURCHASE FLOW
        // ============================================
        function showNameModal() {
            const count = selectedSquares.size;
            document.getElementById('summaryCount').textContent = count;
            document.getElementById('summaryTotal').textContent = count * 25;
            document.getElementById('nameModal').classList.add('active');
            document.getElementById('playerName').focus();
        }

        function hideNameModal() {
            document.getElementById('nameModal').classList.remove('active');
            document.getElementById('playerName').value = '';
        }

        function submitPurchase() {
            const name = document.getElementById('playerName').value.trim();
            if (!name) {
                alert('Please enter your name');
                return;
            }

            // Sanitize name for use as Firebase key (replace problematic characters)
            const nameKey = sanitizeForKey(name);

            const count = selectedSquares.size;
            const total = count * 25;

            // Claim the squares
            selectedSquares.forEach(squareId => {
                squaresData[squareId] = name; // Store display name
            });

            // Update participant record using sanitized key
            if (!participants[nameKey]) {
                participants[nameKey] = { squares: [], paid: false, displayName: name };
            }
            participants[nameKey].displayName = name; // Always update display name
            participants[nameKey].squares = [
                ...participants[nameKey].squares,
                ...Array.from(selectedSquares)
            ];

            // Save data
            saveData();

            // Show success modal
            document.getElementById('successCount').textContent = count;
            document.getElementById('successTotal').textContent = total;
            document.getElementById('successModal').classList.add('active');

            // Reset selection
            selectedSquares.clear();
            hideNameModal();
            renderGrid();
            updateSelectionPanel();
            updateStats();
        }

        function sanitizeForKey(name) {
            // Firebase doesn't allow . $ # [ ] / in keys
            return name.replace(/[.#$\[\]\/]/g, '_');
        }

        function getDisplayName(nameKey) {
            if (participants[nameKey] && participants[nameKey].displayName) {
                return participants[nameKey].displayName;
            }
            return nameKey;
        }

        // ============================================
        // STATS
        // ============================================
        function updateStats() {
            const taken = Object.keys(squaresData).length;
            const available = 100 - taken;

            document.getElementById('availableCount').textContent = available;
            document.getElementById('takenCount').textContent = taken;
            
            // Hide stats bar when all squares are taken
            const statsBar = document.querySelector('.stats-bar');
            if (statsBar) {
                if (taken >= 100) {
                    statsBar.style.display = 'none';
                } else {
                    statsBar.style.display = 'flex';
                }
            }
        }

        // ============================================
        // NUMBERS SECTION
        // ============================================
        // ============================================
        // ADMIN FUNCTIONS
        // ============================================
        function showPasswordModal() {
            document.getElementById('passwordModal').classList.add('active');
            document.getElementById('adminPassword').focus();
        }

        function hidePasswordModal() {
            document.getElementById('passwordModal').classList.remove('active');
            document.getElementById('adminPassword').value = '';
        }

        function checkAdminPassword() {
            const password = document.getElementById('adminPassword').value;
            if (password === ADMIN_PASSWORD) {
                isAdmin = true;
                hidePasswordModal();
                showAdminPanel();
            } else {
                alert('Incorrect password');
            }
        }

        function showAdminPanel() {
            document.getElementById('gridSection').style.display = 'none';
            document.getElementById('squaresSection').style.display = 'none';
            document.getElementById('propBetsSection').style.display = 'none';
            document.getElementById('adminSection').classList.add('active');
            populateTeamSettingsForm();
            populateQuarterScores();
            renderQuarterEditor();
            renderAdminTable();
            // Prop bets admin
            updatePropEntriesStatus();
            renderAdminQuestionsList();
            renderCorrectAnswersForm();
            renderPropEntriesTable();
            populatePayoutStructure();
        }

        function hideAdminPanel() {
            document.getElementById('adminSection').classList.remove('active');
            document.getElementById('squaresSection').style.display = 'block';
            document.getElementById('gridSection').style.display = 'block';
        }

        function populateTeamSettingsForm() {
            // Team X
            document.getElementById('teamXNameInput').value = teamSettings.x.name;
            document.getElementById('teamXBgColor').value = teamSettings.x.bgColor;
            document.getElementById('teamXTextColor').value = teamSettings.x.textColor;
            document.getElementById('teamXBgHex').textContent = teamSettings.x.bgColor;
            document.getElementById('teamXTextHex').textContent = teamSettings.x.textColor;
            updateTeamPreview('X');
            
            // Team Y
            document.getElementById('teamYNameInput').value = teamSettings.y.name;
            document.getElementById('teamYBgColor').value = teamSettings.y.bgColor;
            document.getElementById('teamYTextColor').value = teamSettings.y.textColor;
            document.getElementById('teamYBgHex').textContent = teamSettings.y.bgColor;
            document.getElementById('teamYTextHex').textContent = teamSettings.y.textColor;
            updateTeamPreview('Y');
        }

        function updateTeamPreview(team) {
            const preview = document.getElementById(`team${team}Preview`);
            const nameInput = document.getElementById(`team${team}NameInput`);
            const bgColor = document.getElementById(`team${team}BgColor`).value;
            const textColor = document.getElementById(`team${team}TextColor`).value;
            
            preview.textContent = nameInput.value || (team === 'X' ? 'NFC TEAM' : 'AFC TEAM');
            preview.style.backgroundColor = bgColor;
            preview.style.color = textColor;
        }

        function saveTeamSettings() {
            teamSettings.x.name = document.getElementById('teamXNameInput').value || 'NFC TEAM';
            teamSettings.x.bgColor = document.getElementById('teamXBgColor').value;
            teamSettings.x.textColor = document.getElementById('teamXTextColor').value;
            
            teamSettings.y.name = document.getElementById('teamYNameInput').value || 'AFC TEAM';
            teamSettings.y.bgColor = document.getElementById('teamYBgColor').value;
            teamSettings.y.textColor = document.getElementById('teamYTextColor').value;
            
            saveData();
            applyTeamColors();
            renderGrid();
            
            alert('Team settings saved!');
        }

        function renderQuarterEditor() {
            const container = document.getElementById('quarterEditor');
            container.innerHTML = '';

            for (let q = 1; q <= 4; q++) {
                const card = document.createElement('div');
                card.className = 'quarter-edit-card';
                card.innerHTML = `
                    <div class="quarter-edit-title">Quarter ${q}</div>
                    <div class="numbers-edit-row">
                        <div class="numbers-edit-label">${teamSettings.x.name} - Columns (0-9)</div>
                        <div class="numbers-edit-grid">
                            ${Array(10).fill(0).map((_, i) => `
                                <input type="text" class="number-input" 
                                    id="q${q}x${i}" 
                                    value="${quarterNumbers[q].x[i]}" 
                                    maxlength="1"
                                    data-quarter="${q}" data-team="x" data-index="${i}">
                            `).join('')}
                        </div>
                    </div>
                    <div class="numbers-edit-row">
                        <div class="numbers-edit-label">${teamSettings.y.name} - Rows (0-9)</div>
                        <div class="numbers-edit-grid">
                            ${Array(10).fill(0).map((_, i) => `
                                <input type="text" class="number-input" 
                                    id="q${q}y${i}" 
                                    value="${quarterNumbers[q].y[i]}" 
                                    maxlength="1"
                                    data-quarter="${q}" data-team="y" data-index="${i}">
                            `).join('')}
                        </div>
                    </div>
                    <div class="quarter-actions">
                        <button class="btn btn-secondary btn-small" onclick="randomizeQuarter(${q})">Random</button>
                        <button class="btn btn-secondary btn-small" onclick="clearQuarter(${q})">Clear</button>
                        <button class="btn btn-primary btn-small" onclick="saveQuarter(${q})">Save Q${q}</button>
                    </div>
                `;
                container.appendChild(card);
            }

            // Add event listeners to number inputs
            document.querySelectorAll('.number-input').forEach(input => {
                input.addEventListener('input', handleNumberInput);
                input.addEventListener('keydown', handleNumberKeydown);
            });
        }

        function handleNumberInput(e) {
            const input = e.target;
            let value = input.value;
            
            // Allow only 0-9 or ?
            if (value !== '?' && value !== '') {
                value = value.replace(/[^0-9]/g, '');
                if (value.length > 1) value = value[0];
                input.value = value;
            }
        }

        function handleNumberKeydown(e) {
            const input = e.target;
            const quarter = parseInt(input.dataset.quarter);
            const team = input.dataset.team;
            const index = parseInt(input.dataset.index);
            
            // Tab to next input
            if (e.key === 'Tab' || e.key === 'ArrowRight') {
                e.preventDefault();
                const nextIndex = index + 1;
                if (nextIndex < 10) {
                    document.getElementById(`q${quarter}${team}${nextIndex}`).focus();
                } else if (team === 'x') {
                    document.getElementById(`q${quarter}y0`).focus();
                }
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                const prevIndex = index - 1;
                if (prevIndex >= 0) {
                    document.getElementById(`q${quarter}${team}${prevIndex}`).focus();
                }
            }
        }

        function saveQuarter(quarter) {
            const xNumbers = [];
            const yNumbers = [];
            
            for (let i = 0; i < 10; i++) {
                const xVal = document.getElementById(`q${quarter}x${i}`).value || '?';
                const yVal = document.getElementById(`q${quarter}y${i}`).value || '?';
                xNumbers.push(xVal);
                yNumbers.push(yVal);
            }
            
            quarterNumbers[quarter] = { x: xNumbers, y: yNumbers };
            saveData();
            renderGrid();
            
            alert(`Quarter ${quarter} numbers saved!`);
        }

        function randomizeQuarter(quarter) {
            const numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9];
            const xNumbers = shuffleArray([...numbers]);
            const yNumbers = shuffleArray([...numbers]);
            
            // Update inputs
            for (let i = 0; i < 10; i++) {
                document.getElementById(`q${quarter}x${i}`).value = xNumbers[i];
                document.getElementById(`q${quarter}y${i}`).value = yNumbers[i];
            }
        }

        function clearQuarter(quarter) {
            for (let i = 0; i < 10; i++) {
                document.getElementById(`q${quarter}x${i}`).value = '?';
                document.getElementById(`q${quarter}y${i}`).value = '?';
            }
        }

        function renderAdminTable() {
            const tbody = document.getElementById('adminTableBody');
            tbody.innerHTML = '';

            const nameKeys = Object.keys(participants);
            if (nameKeys.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; color: rgba(255,255,255,0.5);">No participants yet</td></tr>';
                return;
            }

            nameKeys.forEach(nameKey => {
                const data = participants[nameKey];
                const displayName = data.displayName || nameKey;
                const squareCount = data.squares.length;
                const total = squareCount * 25;
                const isPaid = data.paid;
                const squaresList = data.squares.join(', ');

                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="participant-name" id="name-${nameKey}">${displayName}</span>
                        <button class="edit-btn" onclick="editParticipantName('${nameKey}')" title="Edit Name">âœï¸</button>
                    </td>
                    <td>
                        <span class="square-count">${squareCount}</span>
                        <button class="edit-btn" onclick="manageSquares('${nameKey}')" title="Manage Squares">ðŸ“‹</button>
                    </td>
                    <td>$${total}</td>
                    <td><span class="status-badge ${isPaid ? 'status-paid' : 'status-pending'}">${isPaid ? 'Paid' : 'Pending'}</span></td>
                    <td><button class="toggle-btn" onclick="togglePaymentStatus('${nameKey}')">${isPaid ? 'Mark Unpaid' : 'Mark Paid'}</button></td>
                    <td><button class="toggle-btn remove-btn" onclick="removeParticipant('${nameKey}')">Remove All</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        function togglePaymentStatus(nameKey) {
            if (participants[nameKey]) {
                participants[nameKey].paid = !participants[nameKey].paid;
                saveData();
                renderAdminTable();
            }
        }

        function removeParticipant(nameKey) {
            const displayName = getDisplayName(nameKey);
            if (confirm(`Are you sure you want to remove ${displayName} and release their squares?`)) {
                // Get their squares and remove them from squaresData
                if (participants[nameKey] && participants[nameKey].squares) {
                    participants[nameKey].squares.forEach(squareId => {
                        delete squaresData[squareId];
                    });
                }
                // Remove participant
                delete participants[nameKey];
                
                saveData();
                renderGrid();
                renderAdminTable();
                updateStats();
            }
        }

        function editParticipantName(nameKey) {
            const currentName = getDisplayName(nameKey);
            const newName = prompt('Enter new name:', currentName);
            if (newName && newName.trim() !== '') {
                const trimmedName = newName.trim();
                
                // Update display name in participants
                participants[nameKey].displayName = trimmedName;
                
                // Update name on all their squares
                participants[nameKey].squares.forEach(squareId => {
                    if (squaresData[squareId]) {
                        squaresData[squareId] = trimmedName;
                    }
                });
                
                saveData();
                renderGrid();
                renderAdminTable();
            }
        }

        function manageSquares(nameKey) {
            const displayName = getDisplayName(nameKey);
            const squares = participants[nameKey].squares;
            
            if (squares.length === 0) {
                alert(`${displayName} has no squares.`);
                return;
            }
            
            const squareList = squares.map((sq, idx) => `${idx + 1}. ${sq}`).join('\n');
            const input = prompt(`${displayName}'s squares:\n${squareList}\n\nEnter square ID to remove (e.g., "3-5") or leave blank to cancel:`);
            
            if (input && input.trim() !== '') {
                const squareId = input.trim();
                removeSpecificSquare(nameKey, squareId);
            }
        }

        function removeSpecificSquare(nameKey, squareId) {
            const displayName = getDisplayName(nameKey);
            
            if (!participants[nameKey].squares.includes(squareId)) {
                alert(`Square ${squareId} not found for ${displayName}`);
                return;
            }
            
            if (confirm(`Remove square ${squareId} from ${displayName}?`)) {
                // Remove from participant's squares array
                participants[nameKey].squares = participants[nameKey].squares.filter(sq => sq !== squareId);
                
                // Remove from squaresData
                delete squaresData[squareId];
                
                // If participant has no more squares, remove them entirely
                if (participants[nameKey].squares.length === 0) {
                    delete participants[nameKey];
                }
                
                saveData();
                renderGrid();
                renderAdminTable();
                updateStats();
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function resetAllSquares() {
            if (confirm('Are you sure you want to reset ALL squares? This cannot be undone!')) {
                if (confirm('This will remove all participant data. Are you REALLY sure?')) {
                    squaresData = {};
                    participants = {};
                    saveData();
                    renderGrid();
                    renderAdminTable();
                    updateStats();
                }
            }
        }

        function exportData() {
            const data = {
                squares: squaresData,
                participants: participants,
                quarterNumbers: quarterNumbers,
                teamSettings: teamSettings,
                currentScore: currentScore,
                quarterScores: quarterScores,
                exportDate: new Date().toISOString()
            };
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'superbowl-squares-export.json';
            a.click();
        }

        // ============================================
        // SCORE MANAGEMENT
        // ============================================
        function updateCurrentScore() {
            const scoreX = document.getElementById('currentScoreX').value;
            const scoreY = document.getElementById('currentScoreY').value;
            const quarter = document.getElementById('currentQuarterSelect').value;
            
            currentScore.x = scoreX !== '' ? parseInt(scoreX) : null;
            currentScore.y = scoreY !== '' ? parseInt(scoreY) : null;
            currentScore.quarter = parseInt(quarter);
            
            saveData();
            renderGrid();
            updateScoreDisplay();
        }

        function clearCurrentScore() {
            currentScore.x = null;
            currentScore.y = null;
            currentScore.quarter = 1;
            document.getElementById('currentScoreX').value = '0';
            document.getElementById('currentScoreY').value = '0';
            document.getElementById('currentQuarterSelect').value = '1';
            
            saveData();
            renderGrid();
            updateScoreDisplay();
        }

        function saveQuarterScore(quarter) {
            const scoreX = document.getElementById(`q${quarter}ScoreX`).value;
            const scoreY = document.getElementById(`q${quarter}ScoreY`).value;
            
            if (scoreX === '' || scoreY === '') {
                alert('Please enter both scores');
                return;
            }
            
            quarterScores[quarter] = {
                x: parseInt(scoreX),
                y: parseInt(scoreY),
                winner: null
            };
            
            // Find the winner
            const lastDigitX = quarterScores[quarter].x % 10;
            const lastDigitY = quarterScores[quarter].y % 10;
            
            let winX = null, winY = null;
            for (let i = 0; i < 10; i++) {
                if (quarterNumbers[quarter] && quarterNumbers[quarter].x[i] == lastDigitX) winX = i;
                if (quarterNumbers[quarter] && quarterNumbers[quarter].y[i] == lastDigitY) winY = i;
            }
            
            if (winX !== null && winY !== null) {
                const squareId = `${winX}-${winY}`;
                quarterScores[quarter].winner = squaresData[squareId] || 'Unclaimed';
            }
            
            saveData();
            renderGrid();
            updateWinnersDisplay();
            populateQuarterScores();
        }

        function clearQuarterScore(quarter) {
            quarterScores[quarter] = { x: null, y: null, winner: null };
            document.getElementById(`q${quarter}ScoreX`).value = '';
            document.getElementById(`q${quarter}ScoreY`).value = '';
            document.getElementById(`q${quarter}WinnerDisplay`).textContent = '';
            
            saveData();
            renderGrid();
            updateWinnersDisplay();
        }

        function updateScoreDisplay() {
            const display = document.getElementById('currentScoreDisplay');
            if (currentScore.x !== null && currentScore.y !== null) {
                display.style.display = 'flex';
                document.getElementById('scoreTeamX').textContent = teamSettings.x.name;
                document.getElementById('scoreTeamY').textContent = teamSettings.y.name;
                document.getElementById('scoreValueX').textContent = currentScore.x;
                document.getElementById('scoreValueY').textContent = currentScore.y;
            } else {
                display.style.display = 'none';
            }
        }

        function updateWinnersDisplay() {
            for (let q = 1; q <= 4; q++) {
                const el = document.getElementById(`winnerQ${q}`);
                if (quarterScores[q] && quarterScores[q].winner) {
                    el.textContent = quarterScores[q].winner;
                    el.classList.remove('pending');
                } else {
                    el.textContent = 'TBD';
                    el.classList.add('pending');
                }
            }
        }

        function populateQuarterScores() {
            for (let q = 1; q <= 4; q++) {
                if (quarterScores[q] && quarterScores[q].x !== null) {
                    document.getElementById(`q${q}ScoreX`).value = quarterScores[q].x;
                    document.getElementById(`q${q}ScoreY`).value = quarterScores[q].y;
                    const winnerDisplay = document.getElementById(`q${q}WinnerDisplay`);
                    if (quarterScores[q].winner) {
                        winnerDisplay.textContent = `Winner: ${quarterScores[q].winner}`;
                    }
                } else {
                    document.getElementById(`q${q}ScoreX`).value = '';
                    document.getElementById(`q${q}ScoreY`).value = '';
                    document.getElementById(`q${q}WinnerDisplay`).textContent = '';
                }
            }
            
            // Update current score inputs
            if (currentScore.x !== null) {
                document.getElementById('currentScoreX').value = currentScore.x;
            }
            if (currentScore.y !== null) {
                document.getElementById('currentScoreY').value = currentScore.y;
            }
            if (currentScore.quarter) {
                document.getElementById('currentQuarterSelect').value = currentScore.quarter;
            }
            
            // Update labels with team names
            document.getElementById('currentScoreLabelX').textContent = `${teamSettings.x.name} Score`;
            document.getElementById('currentScoreLabelY').textContent = `${teamSettings.y.name} Score`;
        }

        // ============================================
        // PROP BETS FUNCTIONS
        // ============================================
        function showSection(section) {
            document.getElementById('squaresSection').style.display = section === 'squares' ? 'block' : 'none';
            document.getElementById('propBetsSection').style.display = section === 'propbets' ? 'block' : 'none';
            
            document.getElementById('navSquares').classList.toggle('active', section === 'squares');
            document.getElementById('navPropBets').classList.toggle('active', section === 'propbets');
            
            if (section === 'propbets') {
                renderPropBetsPage();
            }
        }

        function renderPropBetsPage() {
            if (!propBetsEntriesOpen) {
                // Show results/leaderboard
                document.getElementById('propBetsForm').style.display = 'none';
                document.getElementById('propBetsResults').style.display = 'block';
                renderPropBetsLeaderboard();
            } else {
                // Show entry form
                document.getElementById('propBetsForm').style.display = 'block';
                document.getElementById('propBetsResults').style.display = 'none';
                
                if (propBetsQuestions.length === 0) {
                    document.getElementById('propQuestionsContainer').innerHTML = '<div class="no-questions-message">No prop bet questions have been added yet. Check back later!</div>';
                    document.getElementById('propQuestionsContainer').style.display = 'block';
                    document.getElementById('propNameEntry').style.display = 'none';
                }
            }
        }

        function startPropBets() {
            const name = document.getElementById('propBetName').value.trim();
            if (!name) {
                alert('Please enter your name');
                return;
            }
            
            currentPropBetUser = name;
            document.getElementById('propNameEntry').style.display = 'none';
            document.getElementById('propQuestionsContainer').style.display = 'block';
            renderPropBetsQuestions();
        }

        function renderPropBetsQuestions() {
            const container = document.getElementById('propQuestionsList');
            container.innerHTML = '';
            
            if (propBetsQuestions.length === 0) {
                container.innerHTML = '<div class="no-questions-message">No questions available.</div>';
                return;
            }
            
            propBetsQuestions.forEach((question, index) => {
                const card = document.createElement('div');
                card.className = 'prop-question-card';
                card.id = `question-${index}`;
                
                let inputHtml = '';
                if (question.type === 'multiple') {
                    inputHtml = '<div class="prop-options">';
                    question.options.forEach((option, optIdx) => {
                        inputHtml += `
                            <div class="prop-option" onclick="selectPropOption(${index}, '${option.replace(/'/g, "\\'")}')">
                                <input type="radio" name="question-${index}" id="q${index}-opt${optIdx}" value="${option}">
                                <label for="q${index}-opt${optIdx}">${option}</label>
                            </div>
                        `;
                    });
                    inputHtml += '</div>';
                } else if (question.type === 'text') {
                    inputHtml = `<input type="text" class="prop-text-input" id="answer-${index}" placeholder="Enter your answer" oninput="markQuestionAnswered(${index})">`;
                } else if (question.type === 'number') {
                    inputHtml = `<input type="number" class="prop-text-input" id="answer-${index}" placeholder="Enter a number" oninput="markQuestionAnswered(${index})">`;
                }
                
                card.innerHTML = `
                    <div class="prop-question-number">Question ${index + 1} of ${propBetsQuestions.length}${question.isTiebreaker ? ' â€¢ TIEBREAKER' : ''}</div>
                    <div class="prop-question-text ${question.isTiebreaker ? 'tiebreaker' : ''}">${question.text}</div>
                    ${inputHtml}
                `;
                
                container.appendChild(card);
            });
        }

        function selectPropOption(questionIndex, value) {
            // Update radio button
            const options = document.querySelectorAll(`#question-${questionIndex} .prop-option`);
            options.forEach(opt => opt.classList.remove('selected'));
            event.currentTarget.classList.add('selected');
            event.currentTarget.querySelector('input[type="radio"]').checked = true;
            
            markQuestionAnswered(questionIndex);
        }

        function markQuestionAnswered(questionIndex) {
            const card = document.getElementById(`question-${questionIndex}`);
            card.classList.add('answered');
        }

        function submitPropBets() {
            // Collect all answers
            const answers = {};
            let allAnswered = true;
            let tiebreakerAnswer = null;
            
            propBetsQuestions.forEach((question, index) => {
                let answer = null;
                
                if (question.type === 'multiple') {
                    const selected = document.querySelector(`input[name="question-${index}"]:checked`);
                    answer = selected ? selected.value : null;
                } else {
                    const input = document.getElementById(`answer-${index}`);
                    answer = input ? input.value.trim() : null;
                }
                
                if (!answer) {
                    allAnswered = false;
                } else {
                    answers[index] = answer;
                    if (question.isTiebreaker) {
                        tiebreakerAnswer = answer;
                    }
                }
            });
            
            if (!allAnswered) {
                alert('Please answer all questions before submitting.');
                return;
            }
            
            // Save entry
            const entryKey = sanitizeForKey(currentPropBetUser);
            propBetsEntries[entryKey] = {
                displayName: currentPropBetUser,
                answers: answers,
                tiebreakerAnswer: tiebreakerAnswer,
                submittedAt: new Date().toISOString(),
                paid: false
            };
            
            saveData();
            
            // Show success and payment info
            showPropBetSuccess();
        }

        function showPropBetSuccess() {
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.id = 'propBetSuccessModal';
            modal.innerHTML = `
                <div class="modal success-modal">
                    <div class="success-icon">ðŸŽ¯</div>
                    <h2 class="modal-title">Prop Bets Submitted!</h2>
                    <p class="success-message">Thank you, <strong>${currentPropBetUser}</strong>!</p>
                    <p class="success-submessage">Your prop bet answers have been recorded.</p>
                    
                    <div class="modal-summary">
                        <div class="summary-row">
                            <span>Questions Answered</span>
                            <span>${propBetsQuestions.length}</span>
                        </div>
                        <div class="summary-row total-row">
                            <span>Entry Fee</span>
                            <span>$5</span>
                        </div>
                    </div>
                    
                    <div class="payment-instructions">
                        <p class="payment-title">ðŸ’³ Payment Options:</p>
                        <div class="payment-option">
                            <span class="payment-method">Venmo:</span>
                            <span class="payment-handle">@drew-labelle</span>
                        </div>
                        <div class="payment-option">
                            <span class="payment-method">Zelle:</span>
                            <span class="payment-handle">drewlabelle5@gmail.com</span>
                        </div>
                    </div>
                    
                    <div class="modal-actions">
                        <button class="btn btn-primary" onclick="exportAndReturn()">
                            ðŸ“„ Export Answers to PDF & Return Home
                        </button>
                        <button class="btn btn-secondary" onclick="returnHome()">
                            ðŸ  Return Home
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function exportAndReturn() {
            exportPropBetsPDF();
            returnHome();
        }

        function returnHome() {
            const modal = document.getElementById('propBetSuccessModal');
            if (modal) modal.remove();
            
            // Reset form
            currentPropBetUser = null;
            document.getElementById('propBetName').value = '';
            document.getElementById('propNameEntry').style.display = 'block';
            document.getElementById('propQuestionsContainer').style.display = 'none';
            
            // Go back to squares section
            showSection('squares');
        }

        function closePropBetSuccess() {
            returnHome();
        }

        function exportPropBetsPDF() {
            // Create printable content
            const entryKey = sanitizeForKey(currentPropBetUser);
            const entry = propBetsEntries[entryKey];
            
            let content = `
                <html>
                <head>
                    <title>Prop Bets - ${currentPropBetUser}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 40px; max-width: 800px; margin: 0 auto; }
                        h1 { color: #D4AF37; text-align: center; }
                        h2 { color: #333; border-bottom: 2px solid #D4AF37; padding-bottom: 10px; }
                        .question { margin-bottom: 20px; padding: 15px; background: #f5f5f5; border-radius: 8px; }
                        .question-text { font-weight: bold; margin-bottom: 8px; }
                        .answer { color: #2563eb; font-size: 1.1em; }
                        .tiebreaker { background: #fef3c7; }
                        .footer { margin-top: 30px; text-align: center; color: #666; font-size: 0.9em; }
                    </style>
                </head>
                <body>
                    <h1>ðŸˆ Super Bowl Prop Bets</h1>
                    <h2>Entry for: ${currentPropBetUser}</h2>
                    <p><strong>Submitted:</strong> ${new Date(entry.submittedAt).toLocaleString()}</p>
            `;
            
            propBetsQuestions.forEach((question, index) => {
                content += `
                    <div class="question ${question.isTiebreaker ? 'tiebreaker' : ''}">
                        <div class="question-text">${index + 1}. ${question.text}${question.isTiebreaker ? ' (TIEBREAKER)' : ''}</div>
                        <div class="answer">Answer: ${entry.answers[index] || 'N/A'}</div>
                    </div>
                `;
            });
            
            content += `
                    <div class="footer">
                        <p>Entry Fee: $5</p>
                        <p>DrewLa's 2026 Super Bowl Squares</p>
                    </div>
                </body>
                </html>
            `;
            
            // Open in new window for printing
            const printWindow = window.open('', '_blank');
            printWindow.document.write(content);
            printWindow.document.close();
            printWindow.print();
        }

        function renderPropBetsLeaderboard() {
            const tbody = document.getElementById('propResultsBody');
            if (tbody) tbody.innerHTML = '';
            
            // Calculate pot and payouts
            const entryCount = Object.keys(propBetsEntries).length;
            const totalPot = entryCount * 5;
            
            // Update stats display (if elements exist)
            const entryCountEl = document.getElementById('propResultsEntryCount');
            const totalPotEl = document.getElementById('propResultsTotalPot');
            if (entryCountEl) entryCountEl.textContent = entryCount;
            if (totalPotEl) totalPotEl.textContent = totalPot;
            
            // Calculate payout amounts (now an array)
            const payouts = calculatePayouts(totalPot);
            
            // Update payouts display dynamically
            const payoutsContainer = document.getElementById('propPayoutsDisplay');
            const medals = ['ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰', '4ï¸âƒ£', '5ï¸âƒ£', '6ï¸âƒ£', '7ï¸âƒ£', '8ï¸âƒ£', '9ï¸âƒ£', 'ðŸ”Ÿ'];
            const ordinals = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th'];
            if (payoutsContainer) {
                payoutsContainer.innerHTML = payouts.map((amount, idx) => 
                    `<span>${medals[idx] || 'â€¢'} ${ordinals[idx] || (idx+1)+'th'}: <strong>$${amount}</strong></span>`
                ).join('');
            }
            
            // Calculate scores
            const entries = Object.keys(propBetsEntries).map(key => {
                const entry = propBetsEntries[key];
                let correctCount = 0;
                
                propBetsQuestions.forEach((question, index) => {
                    if (!question.isTiebreaker && propBetsCorrectAnswers[index]) {
                        if (entry.answers[index] && 
                            entry.answers[index].toString().toLowerCase() === propBetsCorrectAnswers[index].toString().toLowerCase()) {
                            correctCount++;
                        }
                    }
                });
                
                return {
                    key: key,
                    name: entry.displayName,
                    correct: correctCount,
                    tiebreaker: parseFloat(entry.tiebreakerAnswer) || 0,
                    submittedAt: entry.submittedAt
                };
            });
            
            // Get actual total score for tiebreaker comparison
            // Find the tiebreaker question and get its correct answer (the actual game total)
            const tiebreakerQuestion = propBetsQuestions.findIndex(q => q.isTiebreaker);
            const actualTotal = tiebreakerQuestion >= 0 && propBetsCorrectAnswers[tiebreakerQuestion] 
                ? parseFloat(propBetsCorrectAnswers[tiebreakerQuestion]) 
                : null;
            
            // Sort by correct answers (desc), then by tiebreaker closeness ONLY if actual total is set
            entries.sort((a, b) => {
                if (b.correct !== a.correct) return b.correct - a.correct;
                // Only use tiebreaker if actual total has been entered
                if (actualTotal !== null) {
                    const aDiff = Math.abs(a.tiebreaker - actualTotal);
                    const bDiff = Math.abs(b.tiebreaker - actualTotal);
                    return aDiff - bDiff;
                }
                return 0; // Keep original order if no tiebreaker set
            });
            
            // Assign places (handle ties properly)
            let currentPlace = 1;
            
            entries.forEach((entry, index) => {
                if (index === 0) {
                    entry.place = 1;
                } else {
                    const prevEntry = entries[index - 1];
                    // Check if tied with previous entry
                    const sameScore = entry.correct === prevEntry.correct;
                    const sameTiebreaker = actualTotal === null || 
                        Math.abs(entry.tiebreaker - actualTotal) === Math.abs(prevEntry.tiebreaker - actualTotal);
                    
                    if (sameScore && sameTiebreaker) {
                        // Tied - same place
                        entry.place = prevEntry.place;
                    } else {
                        // Not tied - place is current index + 1
                        entry.place = index + 1;
                    }
                }
                entry.isTied = false; // Will be updated below
            });
            
            // Mark entries that are tied
            entries.forEach(entry => {
                const othersWithSamePlace = entries.filter(e => e.place === entry.place);
                entry.isTied = othersWithSamePlace.length > 1;
            });
            
            // Update header standings (top 5 unique places)
            updateHeaderPropStandings(entries);
            
            // Render table (only if results section exists and entries closed)
            if (tbody && !propBetsEntriesOpen) {
                entries.forEach(entry => {
                    const row = document.createElement('tr');
                    row.className = 'clickable-row';
                    row.onclick = () => showEntryAnswers(entry.key);
                    let placeClass = 'place-other';
                    let payoutAmount = '';
                    
                    // Get payout for this place (array is 0-indexed, place is 1-indexed)
                    if (entry.place <= payouts.length) {
                        payoutAmount = '$' + payouts[entry.place - 1];
                    }
                    
                    if (entry.place === 1) placeClass = 'place-1';
                    else if (entry.place === 2) placeClass = 'place-2';
                    else if (entry.place === 3) placeClass = 'place-3';
                    
                    const totalQuestions = propBetsQuestions.filter(q => !q.isTiebreaker).length;
                    const placeDisplay = entry.isTied ? `T${entry.place}` : entry.place;
                    
                    row.innerHTML = `
                        <td><span class="place-badge ${placeClass}">${placeDisplay}</span></td>
                        <td class="name-cell">${entry.name} <span class="view-answers-hint">ðŸ‘ View</span></td>
                        <td>${entry.correct} / ${totalQuestions}</td>
                        <td>${entry.tiebreaker}</td>
                        <td class="payout-cell">${payoutAmount}</td>
                    `;
                    tbody.appendChild(row);
                });
                
                if (entries.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; color: rgba(255,255,255,0.5);">No entries yet</td></tr>';
                }
            }
        }

        function updateHeaderPropStandings(allEntries) {
            const container = document.getElementById('propStandingsHeaderList');
            if (!container) return;
            
            if (allEntries.length === 0) {
                container.innerHTML = '<span class="prop-standing-item">No entries yet</span>';
                return;
            }
            
            const medals = ['ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰', '4ï¸âƒ£', '5ï¸âƒ£'];
            const totalQuestions = propBetsQuestions.filter(q => !q.isTiebreaker).length;
            
            // Group entries by place
            const placeGroups = {};
            allEntries.forEach(entry => {
                if (!placeGroups[entry.place]) {
                    placeGroups[entry.place] = [];
                }
                placeGroups[entry.place].push(entry);
            });
            
            // Get unique places in order, limit to top 5 places
            const uniquePlaces = Object.keys(placeGroups).map(Number).sort((a, b) => a - b).slice(0, 5);
            
            const standingsHtml = uniquePlaces.map((place, idx) => {
                const entriesAtPlace = placeGroups[place];
                const medal = medals[idx] || (place);
                const score = entriesAtPlace[0].correct;
                
                let nameDisplay;
                if (entriesAtPlace.length === 1) {
                    nameDisplay = entriesAtPlace[0].name;
                } else if (entriesAtPlace.length <= 3) {
                    nameDisplay = entriesAtPlace.map(e => e.name).join(', ');
                } else {
                    nameDisplay = 'Multiple';
                }
                
                return `
                    <span class="prop-standing-item">
                        <span class="prop-standing-place">${medal}</span>
                        <span class="prop-standing-name">${nameDisplay}</span>
                        <span class="prop-standing-score">(${score}/${totalQuestions})</span>
                    </span>
                `;
            }).join('<span class="payout-divider">â€¢</span>');
            
            container.innerHTML = standingsHtml;
        }

        function showEntryAnswers(key) {
            const entry = propBetsEntries[key];
            if (!entry) return;
            
            const totalQuestions = propBetsQuestions.filter(q => !q.isTiebreaker).length;
            let correctCount = 0;
            
            let questionsHtml = propBetsQuestions.map((question, index) => {
                const answer = entry.answers[index] || 'N/A';
                const correctAnswer = propBetsCorrectAnswers[index];
                let isCorrect = false;
                let statusClass = '';
                let statusIcon = '';
                
                if (!question.isTiebreaker && correctAnswer) {
                    isCorrect = answer.toString().toLowerCase() === correctAnswer.toString().toLowerCase();
                    statusClass = isCorrect ? 'answer-correct' : 'answer-incorrect';
                    statusIcon = isCorrect ? 'âœ“' : 'âœ—';
                    if (isCorrect) correctCount++;
                }
                
                return `
                    <div class="entry-answer-item ${statusClass}">
                        <div class="entry-answer-question">${index + 1}. ${question.text}${question.isTiebreaker ? ' (TIEBREAKER)' : ''}</div>
                        <div class="entry-answer-value">
                            ${statusIcon} ${answer}
                            ${correctAnswer && !isCorrect && !question.isTiebreaker ? `<span class="correct-answer-hint">(Correct: ${correctAnswer})</span>` : ''}
                        </div>
                    </div>
                `;
            }).join('');
            
            const modal = document.createElement('div');
            modal.className = 'modal-overlay active';
            modal.id = 'viewAnswersModal';
            modal.onclick = (e) => { if (e.target === modal) modal.remove(); };
            modal.innerHTML = `
                <div class="modal answers-modal">
                    <h2 class="modal-title">${entry.displayName}'s Answers</h2>
                    <div class="answers-score-summary">
                        Score: <strong>${correctCount} / ${totalQuestions}</strong> correct
                        ${entry.tiebreakerAnswer ? ` â€¢ Tiebreaker: <strong>${entry.tiebreakerAnswer}</strong>` : ''}
                    </div>
                    <div class="entry-answers-list">
                        ${questionsHtml}
                    </div>
                    <div class="modal-actions">
                        <button class="btn btn-primary" onclick="document.getElementById('viewAnswersModal').remove()">Close</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function calculatePayouts(totalPot) {
            const parsePayoutValue = (value, pot) => {
                if (typeof value === 'string' && value.includes('%')) {
                    const percent = parseFloat(value.replace('%', ''));
                    return Math.round(pot * percent / 100);
                }
                return parseInt(value) || 0;
            };
            
            return propBetsPayoutStructure.map(value => parsePayoutValue(value, totalPot));
        }

        function savePayoutStructure() {
            const inputs = document.querySelectorAll('#payoutInputsContainer .payout-value-input');
            propBetsPayoutStructure = [];
            inputs.forEach(input => {
                if (input.value.trim()) {
                    propBetsPayoutStructure.push(input.value.trim());
                }
            });
            if (propBetsPayoutStructure.length === 0) {
                propBetsPayoutStructure = ['50%', '30%', '20%'];
            }
            saveData();
            alert('Payout structure saved!');
            renderPropBetsLeaderboard();
        }

        function populatePayoutStructure() {
            renderPayoutInputs();
        }

        function renderPayoutInputs() {
            const container = document.getElementById('payoutInputsContainer');
            container.innerHTML = '';
            
            const ordinals = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th', '9th', '10th'];
            
            propBetsPayoutStructure.forEach((value, index) => {
                const div = document.createElement('div');
                div.className = 'payout-input-group';
                div.innerHTML = `
                    <label>${ordinals[index] || (index + 1) + 'th'} Place:</label>
                    <input type="text" class="modal-input payout-value-input" data-index="${index}" placeholder="e.g., 50% or $50" value="${value}">
                    ${index >= 3 ? `<button class="btn btn-small remove-payout-btn" onclick="removePayoutPlace(${index})">âœ•</button>` : ''}
                `;
                container.appendChild(div);
            });
        }

        function addPayoutPlace() {
            propBetsPayoutStructure.push('0%');
            renderPayoutInputs();
        }

        function removePayoutPlace(index) {
            if (propBetsPayoutStructure.length > 1) {
                propBetsPayoutStructure.splice(index, 1);
                renderPayoutInputs();
            }
        }

        // ============================================
        // ADMIN PROP BETS FUNCTIONS
        // ============================================
        function addPropQuestion() {
            const text = document.getElementById('newQuestionText').value.trim();
            const type = document.getElementById('newQuestionType').value;
            const optionsInput = document.getElementById('newQuestionOptions').value.trim();
            const isTiebreaker = document.getElementById('isTiebreaker').checked;
            
            if (!text) {
                alert('Please enter a question');
                return;
            }
            
            if (type === 'multiple' && !optionsInput) {
                alert('Please enter options for multiple choice question');
                return;
            }
            
            const question = {
                text: text,
                type: type,
                options: type === 'multiple' ? optionsInput.split(',').map(o => o.trim()).filter(o => o) : [],
                isTiebreaker: isTiebreaker
            };
            
            propBetsQuestions.push(question);
            saveData();
            
            // Clear form
            document.getElementById('newQuestionText').value = '';
            document.getElementById('newQuestionOptions').value = '';
            document.getElementById('isTiebreaker').checked = false;
            
            renderAdminQuestionsList();
            renderCorrectAnswersForm();
        }

        function removeQuestion(index) {
            if (confirm('Are you sure you want to remove this question?')) {
                propBetsQuestions.splice(index, 1);
                saveData();
                renderAdminQuestionsList();
                renderCorrectAnswersForm();
            }
        }

        function renderAdminQuestionsList() {
            const container = document.getElementById('adminQuestionsList');
            container.innerHTML = '';
            
            if (propBetsQuestions.length === 0) {
                container.innerHTML = '<p style="color: rgba(255,255,255,0.5);">No questions added yet.</p>';
                return;
            }
            
            propBetsQuestions.forEach((question, index) => {
                const item = document.createElement('div');
                item.className = 'admin-question-item';
                item.innerHTML = `
                    <div class="question-reorder-btns">
                        <button class="reorder-btn" onclick="moveQuestionUp(${index})" ${index === 0 ? 'disabled' : ''} title="Move Up">â–²</button>
                        <button class="reorder-btn" onclick="moveQuestionDown(${index})" ${index === propBetsQuestions.length - 1 ? 'disabled' : ''} title="Move Down">â–¼</button>
                    </div>
                    <div class="admin-question-info">
                        <div class="admin-question-text">${index + 1}. ${question.text}</div>
                        <div class="admin-question-meta">
                            Type: ${question.type}${question.isTiebreaker ? ' â€¢ TIEBREAKER' : ''}
                            ${question.type === 'multiple' ? ' â€¢ Options: ' + question.options.join(', ') : ''}
                        </div>
                    </div>
                    <div class="admin-question-actions">
                        <button class="toggle-btn" onclick="editQuestion(${index})">Edit</button>
                        <button class="toggle-btn remove-btn" onclick="removeQuestion(${index})">Remove</button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function moveQuestionUp(index) {
            if (index > 0) {
                const temp = propBetsQuestions[index];
                propBetsQuestions[index] = propBetsQuestions[index - 1];
                propBetsQuestions[index - 1] = temp;
                saveData();
                renderAdminQuestionsList();
                renderCorrectAnswersForm();
            }
        }

        function moveQuestionDown(index) {
            if (index < propBetsQuestions.length - 1) {
                const temp = propBetsQuestions[index];
                propBetsQuestions[index] = propBetsQuestions[index + 1];
                propBetsQuestions[index + 1] = temp;
                saveData();
                renderAdminQuestionsList();
                renderCorrectAnswersForm();
            }
        }

        function editQuestion(index) {
            const question = propBetsQuestions[index];
            const newText = prompt('Edit question text:', question.text);
            if (newText && newText.trim()) {
                propBetsQuestions[index].text = newText.trim();
                
                if (question.type === 'multiple') {
                    const newOptions = prompt('Edit options (comma separated):', question.options.join(', '));
                    if (newOptions) {
                        propBetsQuestions[index].options = newOptions.split(',').map(o => o.trim()).filter(o => o);
                    }
                }
                
                saveData();
                renderAdminQuestionsList();
                renderCorrectAnswersForm();
            }
        }

        function renderCorrectAnswersForm() {
            const container = document.getElementById('correctAnswersForm');
            container.innerHTML = '';
            
            if (propBetsQuestions.length === 0) {
                container.innerHTML = '<p style="color: rgba(255,255,255,0.5);">Add questions first.</p>';
                return;
            }
            
            propBetsQuestions.forEach((question, index) => {
                const div = document.createElement('div');
                div.className = 'form-row';
                div.style.marginBottom = '15px';
                
                let inputHtml = '';
                if (question.type === 'multiple') {
                    inputHtml = `<select class="modal-input" id="correct-${index}">
                        <option value="">-- Select correct answer --</option>
                        ${question.options.map(opt => `<option value="${opt}" ${propBetsCorrectAnswers[index] === opt ? 'selected' : ''}>${opt}</option>`).join('')}
                    </select>`;
                } else {
                    inputHtml = `<input type="${question.type === 'number' ? 'number' : 'text'}" class="modal-input" id="correct-${index}" 
                        value="${propBetsCorrectAnswers[index] || ''}" placeholder="Enter correct answer">`;
                }
                
                div.innerHTML = `
                    <div style="flex: 1;">
                        <label style="display: block; margin-bottom: 5px; color: ${question.isTiebreaker ? 'var(--gold)' : 'rgba(255,255,255,0.7)'};">
                            ${index + 1}. ${question.text}${question.isTiebreaker ? ' (Tiebreaker - enter actual total)' : ''}
                        </label>
                        ${inputHtml}
                    </div>
                `;
                container.appendChild(div);
            });
        }

        function saveCorrectAnswers() {
            // Clear existing answers and rebuild from form
            const newCorrectAnswers = {};
            
            console.log('Saving correct answers...');
            
            propBetsQuestions.forEach((question, index) => {
                const input = document.getElementById(`correct-${index}`);
                if (input) {
                    const value = input.value.trim();
                    console.log(`Question ${index}: "${value}"`);
                    if (value) {
                        newCorrectAnswers[index] = value;
                    }
                }
            });
            
            console.log('New correct answers:', newCorrectAnswers);
            
            // Replace the entire object
            propBetsCorrectAnswers = newCorrectAnswers;
            
            // Save to Firebase/localStorage
            if (isFirebaseConnected) {
                // Explicitly save just the correct answers to Firebase
                db.ref('/propBetsCorrectAnswers').set(propBetsCorrectAnswers)
                    .then(() => {
                        console.log('Correct answers saved to Firebase');
                        renderPropBetsLeaderboard();
                        renderPropEntriesTable();
                        alert('Correct answers saved!');
                    })
                    .catch(err => {
                        console.error('Error saving to Firebase:', err);
                        alert('Error saving answers. Please try again.');
                    });
            } else {
                saveData();
                renderPropBetsLeaderboard();
                renderPropEntriesTable();
                alert('Correct answers saved!');
            }
        }

        function togglePropEntries() {
            propBetsEntriesOpen = !propBetsEntriesOpen;
            saveData();
            updatePropEntriesStatus();
        }

        function updatePropEntriesStatus() {
            const btn = document.getElementById('togglePropEntriesBtn');
            const indicator = document.getElementById('propStatusIndicator');
            
            if (propBetsEntriesOpen) {
                btn.textContent = 'Close Entries';
                indicator.textContent = 'âœ… Open';
                indicator.style.color = 'var(--success)';
            } else {
                btn.textContent = 'Open Entries';
                indicator.textContent = 'ðŸ”’ Closed';
                indicator.style.color = '#dc2626';
            }
        }

        function renderPropEntriesTable() {
            const tbody = document.getElementById('propEntriesBody');
            const countEl = document.getElementById('propEntryCount');
            const potEl = document.getElementById('propTotalPot');
            tbody.innerHTML = '';
            
            const entries = Object.keys(propBetsEntries);
            countEl.textContent = entries.length;
            potEl.textContent = entries.length * 5;
            
            if (entries.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align:center; color: rgba(255,255,255,0.5);">No entries yet</td></tr>';
                return;
            }
            
            entries.forEach(key => {
                const entry = propBetsEntries[key];
                let correctCount = 0;
                
                propBetsQuestions.forEach((question, index) => {
                    if (!question.isTiebreaker && propBetsCorrectAnswers[index]) {
                        if (entry.answers[index] && 
                            entry.answers[index].toString().toLowerCase() === propBetsCorrectAnswers[index].toString().toLowerCase()) {
                            correctCount++;
                        }
                    }
                });
                
                const isPaid = entry.paid || false;
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${entry.displayName}</td>
                    <td>${new Date(entry.submittedAt).toLocaleDateString()}</td>
                    <td>${correctCount} / ${propBetsQuestions.filter(q => !q.isTiebreaker).length}</td>
                    <td><span class="status-badge ${isPaid ? 'status-paid' : 'status-pending'}">${isPaid ? 'Paid' : 'Pending'}</span></td>
                    <td>
                        <button class="toggle-btn" onclick="togglePropPaymentStatus('${key}')">${isPaid ? 'Mark Unpaid' : 'Mark Paid'}</button>
                        <button class="toggle-btn" onclick="viewPropEntry('${key}')">View</button>
                        <button class="toggle-btn remove-btn" onclick="removePropEntry('${key}')">Remove</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function togglePropPaymentStatus(key) {
            if (propBetsEntries[key]) {
                propBetsEntries[key].paid = !propBetsEntries[key].paid;
                saveData();
                renderPropEntriesTable();
            }
        }

        function viewPropEntry(key) {
            const entry = propBetsEntries[key];
            let content = `Answers for ${entry.displayName}:\n\n`;
            
            propBetsQuestions.forEach((question, index) => {
                const answer = entry.answers[index] || 'N/A';
                const correct = propBetsCorrectAnswers[index];
                const isCorrect = correct && answer.toString().toLowerCase() === correct.toString().toLowerCase();
                content += `${index + 1}. ${question.text}\n   Answer: ${answer}${correct ? (isCorrect ? ' âœ“' : ' âœ— (Correct: ' + correct + ')') : ''}\n\n`;
            });
            
            alert(content);
        }

        function removePropEntry(key) {
            const entry = propBetsEntries[key];
            if (confirm(`Remove entry for ${entry.displayName}?`)) {
                delete propBetsEntries[key];
                saveData();
                renderPropEntriesTable();
            }
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        function setupEventListeners() {
            // Selection panel
            document.getElementById('clearSelectionBtn').addEventListener('click', clearSelection);
            document.getElementById('confirmSelectionBtn').addEventListener('click', showNameModal);

            // Name modal
            document.getElementById('cancelNameBtn').addEventListener('click', hideNameModal);
            document.getElementById('submitNameBtn').addEventListener('click', submitPurchase);
            document.getElementById('playerName').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') submitPurchase();
            });

            // Success modal
            document.getElementById('closeSuccessBtn').addEventListener('click', () => {
                document.getElementById('successModal').classList.remove('active');
            });

            // Admin login button at bottom
            document.getElementById('adminLoginBtn').addEventListener('click', () => {
                if (isAdmin) {
                    showAdminPanel();
                } else {
                    showPasswordModal();
                }
            });

            // Password modal
            document.getElementById('cancelPasswordBtn').addEventListener('click', hidePasswordModal);
            document.getElementById('submitPasswordBtn').addEventListener('click', checkAdminPassword);
            document.getElementById('adminPassword').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') checkAdminPassword();
            });

            // Admin actions
            document.getElementById('resetGridBtn').addEventListener('click', resetAllSquares);
            document.getElementById('exportBtn').addEventListener('click', exportData);
            document.getElementById('backToGridBtn').addEventListener('click', hideAdminPanel);

            // Team settings
            document.getElementById('saveTeamSettingsBtn').addEventListener('click', saveTeamSettings);
            
            // Color pickers - Team X
            document.getElementById('teamXBgColor').addEventListener('input', (e) => {
                document.getElementById('teamXBgHex').textContent = e.target.value;
                updateTeamPreview('X');
            });
            document.getElementById('teamXTextColor').addEventListener('input', (e) => {
                document.getElementById('teamXTextHex').textContent = e.target.value;
                updateTeamPreview('X');
            });
            document.getElementById('teamXNameInput').addEventListener('input', () => updateTeamPreview('X'));
            
            // Color pickers - Team Y
            document.getElementById('teamYBgColor').addEventListener('input', (e) => {
                document.getElementById('teamYBgHex').textContent = e.target.value;
                updateTeamPreview('Y');
            });
            document.getElementById('teamYTextColor').addEventListener('input', (e) => {
                document.getElementById('teamYTextHex').textContent = e.target.value;
                updateTeamPreview('Y');
            });
            document.getElementById('teamYNameInput').addEventListener('input', () => updateTeamPreview('Y'));

            // Score management
            document.getElementById('updateCurrentScoreBtn').addEventListener('click', updateCurrentScore);
            document.getElementById('clearCurrentScoreBtn').addEventListener('click', clearCurrentScore);

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });

            // Prop Bets event listeners
            document.getElementById('startPropBetsBtn').addEventListener('click', startPropBets);
            document.getElementById('submitPropBetsBtn').addEventListener('click', submitPropBets);
            document.getElementById('propBetsAdminBtn').addEventListener('click', () => {
                if (isAdmin) {
                    showAdminPanel();
                } else {
                    showPasswordModal();
                }
            });
            document.getElementById('addQuestionBtn').addEventListener('click', addPropQuestion);
            document.getElementById('togglePropEntriesBtn').addEventListener('click', togglePropEntries);
            document.getElementById('saveCorrectAnswersBtn').addEventListener('click', saveCorrectAnswers);
            document.getElementById('savePayoutStructureBtn').addEventListener('click', savePayoutStructure);
            document.getElementById('addPayoutBtn').addEventListener('click', addPayoutPlace);
            
            // Question type change handler
            document.getElementById('newQuestionType').addEventListener('change', (e) => {
                document.getElementById('optionsRow').style.display = e.target.value === 'multiple' ? 'block' : 'none';
            });
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            console.log('Window loaded');
            // Initialize prop bets admin UI
            updatePropEntriesStatus();
            renderAdminQuestionsList();
            renderCorrectAnswersForm();
            renderPropEntriesTable();
            populatePayoutStructure();
        });
    </script>
</body>
</html>